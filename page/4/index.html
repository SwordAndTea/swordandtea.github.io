<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://SwordAndTea.github.io').hostname,
    root: '/',
    scheme: 'Pisces',
    version: '7.7.1',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: true,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta property="og:type" content="website">
<meta property="og:title" content="xiangwei&#39;s blog">
<meta property="og:url" content="http://swordandtea.github.io/page/4/index.html">
<meta property="og:site_name" content="xiangwei&#39;s blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="SwordAndTea">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://swordandtea.github.io/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>xiangwei's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">xiangwei's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://swordandtea.github.io/2021/03/03/design_patterns/%E7%BB%93%E6%9E%84%E6%80%A7%E6%A8%A1%E5%BC%8F/%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="SwordAndTea">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiangwei's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/03/03/design_patterns/%E7%BB%93%E6%9E%84%E6%80%A7%E6%A8%A1%E5%BC%8F/%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">å¤–è§‚æ¨¡å¼</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-03-03 17:19:58 / Modified: 17:39:30" itemprop="dateCreated datePublished" datetime="2021-03-03T17:19:58+08:00">2021-03-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/design-pattern/" itemprop="url" rel="index">
                    <span itemprop="name">design pattern</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>146</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>1 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="å¤–è§‚æ¨¡å¼ç®€ä»‹"><a href="#å¤–è§‚æ¨¡å¼ç®€ä»‹" class="headerlink" title="å¤–è§‚æ¨¡å¼ç®€ä»‹"></a>å¤–è§‚æ¨¡å¼ç®€ä»‹</h1><p>å‡è®¾ä½ çš„ä»£ç å¿…é¡»å’ŒæŸä¸ªå¤æ‚çš„åº“æˆ–æ¡†æ¶è¿›è¡Œäº¤äº’ï¼Œæ­£å¸¸æƒ…å†µä¸‹ä½ ä¸ä¼šç”¨åˆ°ç¬¬ä¸‰æ–¹åº“çš„å…¨éƒ¨åŠŸèƒ½ï¼Œè¿™æ—¶å€™ä½ å¯ä»¥ä¸ºåŒ…å«è®¸å¤šæ´»åŠ¨éƒ¨ä»¶çš„å¤æ‚ç³»ç»Ÿæä¾›ä¸€ä¸ªç®€å•çš„æ¥å£ï¼Œè¿™å°±æ˜¯å¤–è§‚æ¨¡å¼ã€‚ä½¿ç”¨å¤–è§‚æ¨¡å¼ï¼Œä¸ç›´æ¥è°ƒç”¨å¤æ‚ç³»ç»Ÿç›¸æ¯”ï¼Œæä¾›çš„åŠŸèƒ½å¯èƒ½æ¯”è¾ƒæœ‰é™ï¼Œä½†æ˜¯å®ƒå´åŒ…å«äº†å®¢æˆ·ç«¯çœŸæ­£å…³å¿ƒçš„åŠŸèƒ½ã€‚</p>
<p>å¤–è§‚æ¨¡å¼ç®€å•çš„ç†è§£å°±æ˜¯ä¸€å±‚æ¥å£å†å°è£…ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://swordandtea.github.io/2021/03/03/design_patterns/%E7%BB%93%E6%9E%84%E6%80%A7%E6%A8%A1%E5%BC%8F/%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="SwordAndTea">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiangwei's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/03/03/design_patterns/%E7%BB%93%E6%9E%84%E6%80%A7%E6%A8%A1%E5%BC%8F/%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">è£…é¥°å™¨æ¨¡å¼</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-03-03 15:43:16" itemprop="dateCreated datePublished" datetime="2021-03-03T15:43:16+08:00">2021-03-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-03-21 21:38:48" itemprop="dateModified" datetime="2021-03-21T21:38:48+08:00">2021-03-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/design-pattern/" itemprop="url" rel="index">
                    <span itemprop="name">design pattern</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>450</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>2 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="è£…é¥°å™¨æ¨¡å¼ç®€ä»‹"><a href="#è£…é¥°å™¨æ¨¡å¼ç®€ä»‹" class="headerlink" title="è£…é¥°å™¨æ¨¡å¼ç®€ä»‹"></a>è£…é¥°å™¨æ¨¡å¼ç®€ä»‹</h1><p>è£…é¥°å™¨æ¨¡å¼å¯ä»¥ä¸ºå·²æœ‰ç±»çš„æ–¹æ³•å¢åŠ æ–°çš„è¡Œä¸ºï¼Œä¾‹å¦‚ä¸ºä¸€ä¸ªæ–‡ä»¶æ•°æ®è¯»å†™ç±»çš„å†™æ•°æ®æ–¹æ³•å¢åŠ æ•°æ®åŠ å¯†çš„è¡Œä¸ºã€‚è€Œå®ç°çš„ç­–ç•¥ä¸æ˜¯åŸºäºç»§æ‰¿è‡ªè¿™ä¸ªå·²æœ‰çš„ç±»ã€‚</p>
<h1 id="è£…é¥°å™¨æ¨¡å¼é€šå¸¸ä»£ç ç»“æ„"><a href="#è£…é¥°å™¨æ¨¡å¼é€šå¸¸ä»£ç ç»“æ„" class="headerlink" title="è£…é¥°å™¨æ¨¡å¼é€šå¸¸ä»£ç ç»“æ„"></a>è£…é¥°å™¨æ¨¡å¼é€šå¸¸ä»£ç ç»“æ„</h1><h1 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//interface</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataManipulable</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">size_t</span> <span class="title">writeData</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> * data)</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">size_t</span> <span class="title">readData</span><span class="params">(<span class="keyword">char</span> * buffer, <span class="keyword">size_t</span> len)</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BaseFileDataManipulator</span>:</span> <span class="keyword">public</span> DataManipulable &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> _filename;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    BaseFileDataManipulator(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp; filename): _filename(filename) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">size_t</span> <span class="title">writeData</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> * data)</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="comment">//write data to file</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">size_t</span> <span class="title">readData</span><span class="params">(<span class="keyword">char</span> * buffer, <span class="keyword">size_t</span> len)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//read data from file</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//decorator interface</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataManipulableDecorator</span>:</span> <span class="keyword">public</span> DataManipulable &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    DataManipulable &amp; _dataManipulator;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    DataManipulableDecorator(DataManipulable &amp; dataManipulator): _dataManipulator(dataManipulator) &#123;&#125;</span><br><span class="line">    <span class="function">DataManipulable &amp; <span class="title">getManipulator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> _dataManipulator;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//concrete decorators</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EncryptDataManipulator</span>:</span> <span class="keyword">public</span> DataManipulableDecorator &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    EncryptDataManipulator(DataManipulable &amp; dataManipulator): DataManipulable(dataManipulator) &#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">size_t</span> <span class="title">writeData</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>  * data)</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="comment">//encrypt data first</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//then delegate to _dataManipulator</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>-&gt;getManipulator().writeData(data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">size_t</span> <span class="title">readData</span><span class="params">(<span class="keyword">char</span> * buffer, <span class="keyword">size_t</span> len)</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="comment">//delegate to _dataManipulator</span></span><br><span class="line">        <span class="keyword">size_t</span> readLen = <span class="keyword">this</span>-&gt;getManipulator().readData(buffer, len);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//do decrypt data operation</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> readLen;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CompressDataManipulator</span>:</span> <span class="keyword">public</span> DataManipulableDecorator &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    CompressDataManipulator(DataManipulable &amp; dataManipulator): DataManipulableDecorator(dataManipulator) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">size_t</span> <span class="title">writeData</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> * data)</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="comment">//compress data first</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//then delegate to _dataManipulator</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>-&gt;getManipulator().writeData(data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">size_t</span> <span class="title">readData</span><span class="params">(<span class="keyword">char</span> * data, <span class="keyword">size_t</span> len)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//delegate to _dataManipulator</span></span><br><span class="line">        <span class="keyword">size_t</span> readLen = <span class="keyword">this</span>-&gt;getManipulator().readData(buffer, len);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//do decompress operation</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> readLen</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šä¾‹ä¸­ï¼ŒBaseFileDataManipulatoræ˜¯ä¸€ä¸ªå·²æœ‰åŸºæœ¬åŠŸèƒ½çš„æ•°æ®è¯»å†™ç±»ï¼Œè€ŒEncryptDataManipulatorå’ŒCompressDataManipulatoråˆ†åˆ«ç”¨äºç»™å·²æœ‰çš„æ•°æ®è¯»å†™ç±»å¢åŠ åŠ å¯†æ•°æ®å’Œå‹ç¼©æ•°æ®çš„èƒ½åŠ›ã€‚<font color="orange">EncryptDataManipulatorå’ŒCompressDataManipulatorå¹¶æ²¡æœ‰ç»§æ‰¿è‡ªBaseFileDataManipulatorï¼Œè€Œæ˜¯ç»§æ‰¿è‡ªDataManipulableDecoratorè¿™ä¸ªæ¥å£ç±»</font>ã€‚ä½†æ˜¯BaseFileDataManipulatorå’ŒDataManipulableDecoratoréƒ½ç»§æ‰¿è‡ªDataManipulableè¿™ä¸ªæ¥å£ç±»ã€‚å®¢æˆ·ç«¯åªå…³å¿ƒå’ŒDataManipulableä¸­å®šä¹‰çš„æ¥å£å³å¯ã€‚</p>
<h1 id="å’Œé€‚é…å™¨æ¨¡å¼çš„å¯¹æ¯”"><a href="#å’Œé€‚é…å™¨æ¨¡å¼çš„å¯¹æ¯”" class="headerlink" title="å’Œé€‚é…å™¨æ¨¡å¼çš„å¯¹æ¯”"></a>å’Œé€‚é…å™¨æ¨¡å¼çš„å¯¹æ¯”</h1><ul>
<li>é€‚é…å™¨æ¨¡å¼ä¸€èˆ¬ç”¨äºå¯¹å·²æœ‰å¯¹è±¡çš„æ¥å£è¿›è¡Œä¿®æ”¹æˆ–è€…å¢åŠ æ–°çš„æ¥å£ï¼Œè€Œé€‚é…å™¨æ¨¡å¼ä¸€èˆ¬ä¸ä¼šæ”¹å˜å·²æœ‰å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ˜¯å¯¹å·²æœ‰å¯¹è±¡çš„æ¥å£çš„å®ç°ä¸Šæ·»åŠ æ–°çš„è¡Œä¸ºã€‚</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://swordandtea.github.io/2021/02/28/program_language/c++/std%E9%BB%91%E9%AD%94%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="SwordAndTea">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiangwei's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/28/program_language/c++/std%E9%BB%91%E9%AD%94%E6%B3%95/" class="post-title-link" itemprop="url">stdé»‘é­”æ³•</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-02-28 16:57:25" itemprop="dateCreated datePublished" datetime="2021-02-28T16:57:25+08:00">2021-02-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-03-05 10:42:28" itemprop="dateModified" datetime="2021-03-05T10:42:28+08:00">2021-03-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/c/" itemprop="url" rel="index">
                    <span itemprop="name">c++</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>250</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>1 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h1><p>ğŸ§šstdé»‘é­”æ³•è®°å½•ï¼Œé‡åˆ°ä¸€ä¸ªè®°ä¸€ä¸ª</p>
<h1 id="std-strlen"><a href="#std-strlen" class="headerlink" title="std::strlen"></a>std::strlen</h1><ul>
<li>ğŸ§™ğŸ»ç”¨æ³•ï¼šåŒcä¸­çš„strlenå‡½æ•°</li>
</ul>
<h1 id="std-lock-gurad"><a href="#std-lock-gurad" class="headerlink" title="std::lock_gurad"></a>std::lock_gurad</h1><ul>
<li><p>ğŸ§™ğŸ»ç”¨æ³•ï¼šæœ‰ç‚¹ç±»ä¼¼pythonä¸­çš„with lock</p>
</li>
<li><p>ğŸ§ªåŸç†ï¼šåœ¨æ„é€ å‡½æ•°ä¸­éœ€è¦ä¼ å…¥ä¸€ä¸ªé”ï¼Œåœ¨æ„é€ æ—¶ï¼Œè‡ªåŠ¨åŠ é”ï¼Œåœ¨ææ„æ—¶è‡ªåŠ¨è§£é”</p>
</li>
<li><p>ğŸŒ°ç¤ºä¾‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sync_func</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">std</span>::mutex lock;</span><br><span class="line">  <span class="function"><span class="built_in">std</span>::lock_guard&lt;<span class="built_in">std</span>::mutex&gt; <span class="title">guard</span><span class="params">(lock)</span></span>;</span><br><span class="line">  <span class="comment">//do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="std-memcmp"><a href="#std-memcmp" class="headerlink" title="std::memcmp"></a>std::memcmp</h1><ul>
<li>ğŸ§™ğŸ»ç”¨æ³•ï¼šæ¯”è¾ƒä¸¤å—å†…å­˜ä¸­çš„æ•°æ®æ˜¯å¦æ˜¯ä¸€è‡´çš„</li>
</ul>
<h1 id="std-allocate-shared"><a href="#std-allocate-shared" class="headerlink" title="std::allocate_shared"></a>std::allocate_shared</h1><ul>
<li>ğŸ§™ğŸ»ç”¨æ³•ï¼šåœ¨std::make_sharedçš„åŠŸèƒ½åŸºç¡€ä¸Šï¼Œä½¿ç”¨è‡ªå®šä¹‰çš„å†…å­˜Allocatorï¼ŒAllocatoréœ€è¦å®ç°allocateå’Œdeallocateè¿™ä¸¤ä¸ªæ–¹æ³•ã€‚</li>
</ul>
<h1 id="std-hash"><a href="#std-hash" class="headerlink" title="std::hash"></a>std::hash</h1><ul>
<li>ğŸ§™ğŸ»ç”¨æ³•ï¼šå¦‚æœæŸç§æ•°æ®ç±»å‹éœ€è¦ä½œä¸ºstdæ— åºå®¹å™¨ï¼ˆä¾‹å¦‚unordered_mapã€unordered_setï¼‰çš„keyçš„è¯ï¼Œåˆ™è¦å®ç°std::hashè¿™ä¸ªæ¨¡ç‰ˆå¯¹åº”ç±»å‹çš„å…·ä½“åŒ–</li>
</ul>
<h1 id="std-numeric-limits"><a href="#std-numeric-limits" class="headerlink" title="std::numeric_limits"></a>std::numeric_limits</h1><ul>
<li><p>ğŸ§™ğŸ»ç”¨æ³•ï¼šè·å–æŸç§ç±»å‹çš„æœ€å¤§æœ€å°å€¼</p>
</li>
<li><p>ğŸŒ°ç¤ºä¾‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::numeric_limits&lt;<span class="keyword">int</span>&gt;::max();</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="std-this-thread-yield"><a href="#std-this-thread-yield" class="headerlink" title="std::this_thread::yield"></a>std::this_thread::yield</h1><ul>
<li><p>ğŸ§™ğŸ»ç”¨æ³•ï¼šæŠŠå½“å‰çº¿ç¨‹å æ®çš„æ—¶é—´ç‰‡è®©æ¸¡å‡ºå»ï¼Œå¹¶ä¸”ä¸å‚åŠ è®©å‡ºæ—¶é—´ç‰‡çš„ç«äº‰</p>
</li>
<li><p>ğŸŒ°ç¤ºä¾‹ï¼š</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::this_thred::yield();</span><br></pre></td></tr></table></figure>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://swordandtea.github.io/2021/02/23/machine_learning/neural_network&deep_learning/environment-and-distribution-shift-problem/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="SwordAndTea">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiangwei's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/23/machine_learning/neural_network&deep_learning/environment-and-distribution-shift-problem/" class="post-title-link" itemprop="url">environment_and_distribution_shift_problem</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-02-23 20:23:50" itemprop="dateCreated datePublished" datetime="2021-02-23T20:23:50+08:00">2021-02-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-04-03 08:50:47" itemprop="dateModified" datetime="2021-04-03T08:50:47+08:00">2021-04-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/machine-learning/" itemprop="url" rel="index">
                    <span itemprop="name">machine learning</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>1.5k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>5 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>åœ¨æ·±åº¦å­¦ä¹ è®­ç»ƒå¥½æ¨¡å‹åï¼Œæ¨¡å‹å¯èƒ½åœ¨æµ‹è¯•é›†è¡¨ç°çš„éå¸¸å¥½ï¼Œä½†æ˜¯å®é™…éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­åï¼Œç”±äºæ•°æ®åˆ†å¸ƒçš„çªç„¶å˜åŒ–ï¼Œå¯¼è‡´æ¨¡å‹å®é™…æ•ˆæœå¾ˆå·®ã€‚è€Œä¸”ï¼Œæœ‰äº›æ—¶å€™æ°æ°å°±æ˜¯å› ä¸ºæ¨¡å‹çš„éƒ¨ç½²æ‰å¯¼è‡´äº†æ•°æ®åˆ†å¸ƒçš„å˜åŒ–ã€‚ä¾‹å¦‚ä¸€ä¸ªåˆ¤æ–­æ˜¯å¦è¦ç»™è´·æ¬¾äººè´·æ¬¾çš„åœºæ™¯ä¸­ï¼Œä¸€èˆ¬æ¥è¯´ç©¿çš®é‹çš„è´·æ¬¾äººè¦æ¯”ç©¿è¿åŠ¨é‹æ¥è´·æ¬¾çš„äººæœ‰æ›´ä½çš„è¿çº¦é£é™©ï¼Œäºæ˜¯è®­ç»ƒäº†ä¸€ä¸ªæ ¹æ®äººçš„é‹æ¥åˆ¤æ–­æ˜¯å¦è¦ç»™äººè´·æ¬¾çš„æ¨¡å‹ã€‚å½“è¿™ä¸ªæ¨¡å‹éƒ¨ç½²åï¼Œäººä»¬å°±å¯èƒ½å‘ç°è¿™ä¸ªæ¨¡å‹çš„åˆ¤æ–­æ¨¡å¼ï¼Œä»¥æ­¤åœ¨æ¥è´·æ¬¾çš„æ—¶å€™æ•…æ„éƒ½ç©¿ä¸Šçš®é‹ã€‚</p>
<h1 id="Distribute-Shiftç±»å‹"><a href="#Distribute-Shiftç±»å‹" class="headerlink" title="Distribute Shiftç±»å‹"></a>Distribute Shiftç±»å‹</h1><h2 id="Covariate-Shift"><a href="#Covariate-Shift" class="headerlink" title="Covariate Shift"></a>Covariate Shift</h2><p>Covariate Shiftæ˜¯ç”±äºæ ·æœ¬è¾“å…¥ç‰¹å¾æ¦‚ç‡åˆ†å¸ƒå˜åŒ–å¯¼è‡´çš„ï¼Œä½†æ˜¯$P(y | x)$æ¡ä»¶æ¦‚ç‡ä¸å˜ã€‚ä¾‹å¦‚åœ¨ä¸€ä¸ªåˆ¤æ–­å›¾ç‰‡æ˜¯çŒ«è¿˜æ˜¯ç‹—çš„äºŒåˆ†ç±»å­¦ä¹ ä»»åŠ¡ä¸­ï¼Œåœ¨è®­ç»ƒæ—¶ï¼Œè¾“å…¥çš„æ ·æœ¬éƒ½æ˜¯çœŸå®ä¸–ç•Œçš„å›¾ç‰‡ï¼Œä½†æ˜¯è®­ç»ƒé›†ä¸­çš„å›¾ç‰‡å´æ˜¯å¡é€šå›¾ç‰‡ã€‚</p>
<h2 id="Label-Shift"><a href="#Label-Shift" class="headerlink" title="Label Shift"></a>Label Shift</h2><p>Label Shiftå’ŒCovariate Shiftç›¸åï¼ŒLabel Shiftæ˜¯ç”±äºè¾“å…¥æ ·æœ¬çš„æ ‡ç­¾æ¦‚ç‡åˆ†å¸ƒå¯¼è‡´çš„ï¼ŒåŒæ—¶$P(x|y)$æ¡ä»¶æ¦‚ç‡ä¸å˜ã€‚Label Shiftåœ¨è¾“å‡ºæ ‡ç­¾ä¼šå½±å“è¾“å…¥ç‰¹å¾çš„æƒ…å†µä¸‹æ˜¯å¾ˆå¸¸è§çš„ã€‚ä¾‹å¦‚åœ¨æ ¹æ®ç—…äººç—‡çŠ¶æ¥åˆ¤æ–­ç—…äººæ‚£ç—…çš„åœºæ™¯ä¸‹ï¼Œæ‚£çš„ç—…æ˜¯ä¼šå½±å“ç—…äººç—‡çŠ¶çš„ã€‚</p>
<h2 id="Concept-Shift"><a href="#Concept-Shift" class="headerlink" title="Concept Shift"></a>Concept Shift</h2><p>Concept Shiftæ˜¯ç”±äºæ ·æœ¬æ ‡ç­¾çš„å®šä¹‰å˜åŒ–å¯¼è‡´çš„ã€‚ä¾‹å¦‚æœ‰äº›æ ‡ç­¾çš„å®šä¹‰ä¼šéšç€å›½å®¶æˆ–è€…åœ°åŸŸçš„å˜åŒ–è€Œä¸åŒã€‚</p>
<h1 id="Distribution-Shiftçš„è§£å†³æ–¹æ³•"><a href="#Distribution-Shiftçš„è§£å†³æ–¹æ³•" class="headerlink" title="Distribution Shiftçš„è§£å†³æ–¹æ³•"></a>Distribution Shiftçš„è§£å†³æ–¹æ³•</h1><h2 id="ç»éªŒè¯¯å·®ä¸çœŸå®è¯¯å·®"><a href="#ç»éªŒè¯¯å·®ä¸çœŸå®è¯¯å·®" class="headerlink" title="ç»éªŒè¯¯å·®ä¸çœŸå®è¯¯å·®"></a>ç»éªŒè¯¯å·®ä¸çœŸå®è¯¯å·®</h2><p>å›é¡¾ä¸€ä¸‹æˆ‘ä»¬è®­ç»ƒæ¨¡å‹æ—¶çš„æ­¥éª¤ï¼Œæˆ‘ä»¬åœ¨è®­ç»ƒé›†$\{(x_1, \space  y_1)\, \dots, (x_n, \space  y_n)}$ä¸Šä¸æ–­è¿­ä»£ï¼Œè°ƒæ•´æ¨¡å‹$f$çš„å‚æ•°ï¼Œä¸ºäº†ç®€åŒ–ï¼Œæˆ‘ä»¬ä¸è€ƒè™‘æ­£åˆ™åŒ–é¡¹ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯æœ€å°åŒ–åœ¨è®­ç»ƒé›†ä¸Šçš„è¯¯å·®ï¼š</p>
<script type="math/tex; mode=display">
minimize \space \frac{1}{n} \sum_{i=1}^{n}l(f(x_i), \space y_i), \space læ˜¯loss \space function \tag{1}</script><p>ä¸Šé¢çš„å¼å­å¯ä»¥çœ‹ä½œæ˜¯æ¨¡å‹çš„ç»éªŒè¯¯å·®ã€‚è€ŒçœŸå®çš„è¯¯å·®æ˜¯æ¨¡å‹åœ¨çœŸå®åˆ†å¸ƒä¸º$p(x, \space y)$çš„<code>æ‰€æœ‰æ ·æœ¬</code>ä¸­çš„æŸå¤±å‡½æ•°çš„æœŸæœ›å€¼ã€‚</p>
<script type="math/tex; mode=display">
E(l(f(x), \space y)) = \int \int l(f(x), \space y)p(x, \space y) dxdy \tag{2}</script><p>ä½†åœ¨å®é™…æƒ…å†µä¸‹æˆ‘ä»¬æ— æ³•è·å–<code>æ‰€æœ‰æ ·æœ¬</code>ï¼Œæ‰€ä»¥é€šå¸¸æˆ‘ä»¬ç”¨ç»éªŒè¯¯å·®å»æ‹Ÿåˆå®é™…è¯¯å·®ã€‚</p>
<h2 id="Covariate-Shift-è§£å†³æ–¹æ³•"><a href="#Covariate-Shift-è§£å†³æ–¹æ³•" class="headerlink" title="Covariate Shift è§£å†³æ–¹æ³•"></a>Covariate Shift è§£å†³æ–¹æ³•</h2><p>å‡è®¾æˆ‘ä»¬çš„è®­ç»ƒæ ·æœ¬çš„ç‰¹å¾çš„æ¦‚ç‡åˆ†å¸ƒæ˜¯$q(x)$ï¼Œä½†æ˜¯æˆ‘ä»¬å®é™…éƒ¨ç½²æ¨¡å‹ï¼Œé¢„æµ‹ç›®æ ‡çš„ç‰¹å¾çš„æ¦‚ç‡åˆ†å¸ƒæ˜¯$p(x)$ã€‚ç”±äºCovariate Shiftçš„ç‰¹ç‚¹æ˜¯$p(y \space | \space  x) = q(y \space | \space  x)$ï¼Œå› æ­¤ï¼Œç”±$(2)$å¼å¯å¾—ï¼š</p>
<script type="math/tex; mode=display">
\begin{align*}
    \int \int l(f(x), \space y)p(x, \space y) dxdy &= \int \int l(f(x), \space y)p(y \space | \space x)p(x) \\
    &= \int \int l(f(x), \space y) q(y \space | \space x) p(x) \\
    &= \int \int l(f(x), \space y) q(x, \space y) \frac{p(x)}{q(x)}
\end{align*}</script><p>å…¶ä¸­ï¼Œ$\frac{p(x)}{q(x)}$å¯ä»¥çœ‹ä½œä¸€ä¸ªæ ·æœ¬æ¥è‡ªäº<code>çœŸå®åˆ†å¸ƒ</code>çš„æ¦‚ç‡å’Œæ ·æœ¬æ¥è‡ªäº<code>é”™è¯¯åˆ†å¸ƒ</code>çš„æ¦‚ç‡çš„æ¯”å€¼ï¼Œé€šè¿‡è¿™ä¸ªæ¯”å€¼æˆ‘ä»¬å¯ä»¥é‡æ–°å¯¹æ¯ä¸ªæ ·æœ¬æ•°æ®è¿›è¡Œæƒé‡åˆ’åˆ†ï¼Œåœ¨$(1)$å¼ä¸­ï¼Œæ‰€æœ‰æ ·æœ¬çš„æƒé‡å€¼éƒ½æ˜¯1ï¼Œå³æ‰€æœ‰åŸæœ¬éƒ½çœ‹ä½œåŒç­‰é‡è¦çš„ï¼Œç»è¿‡é‡æ–°åˆ’åˆ†ä¹‹åæ ·æœ¬çš„æƒé‡è®¾ä¸º$\frac{p(x)}{q(x)}$ï¼Œå³å¦‚æœæ ·æœ¬æ¥è‡ªäºçœŸå®åˆ†å¸ƒçš„æ¦‚ç‡è¶Šå¤§ï¼Œé‚£ä¹ˆæ ·æœ¬çš„æƒé‡å€¼è¶Šé«˜ã€‚é‚£ä¹ˆå¯ä»¥ä½¿ç”¨ç»è¿‡ä¿®æ­£åçš„loss functionï¼š</p>
<script type="math/tex; mode=display">
minimize \space \frac{p(x)}{q(x)} \space \frac{1}{n} \sum_{i=1}^{n}l(f(x_i), \space y_i)</script><p><font color="orange">ä½†æ˜¯ï¼Œæˆ‘ä»¬å¦‚ä½•çŸ¥é“</font>$\frac{p(x)}{q(x)}$<font color="orange">çš„æ¯”å€¼æ˜¯å¤šå°‘å‘¢ï¼Ÿ</font>ä¸ºäº†è·å–è¿™ä¸ªæ¯”å€¼ï¼Œæˆ‘ä»¬éœ€è¦ä»<code>é”™è¯¯åˆ†å¸ƒ</code>çš„æ ·æœ¬å’Œä»<code>æ­£ç¡®åˆ†å¸ƒ</code>ä¸­è·å–çš„æ ·æœ¬ã€‚å¦å¤–ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆåˆ©ç”¨è¿™äº›æ•°æ®å…ˆå­¦ä¹ ä¸€ä¸ªäºŒåˆ†ç±»å™¨ï¼Œç”¨äºåŒºåˆ†æ ·æœ¬æ˜¯æ¥è‡ªäº<code>é”™è¯¯åˆ†å¸ƒ</code>è¿˜æ˜¯æ¥è‡ªäº<code>æ­£ç¡®åˆ†å¸ƒ</code>ã€‚å‡è®¾æˆ‘ä»¬ç”¨$z=1$è¡¨ç¤ºæ ·æœ¬æ¥è‡ªæ­£ç¡®åˆ†å¸ƒ$p(x)$ï¼Œç”¨$z=0$è¡¨ç¤ºæ ·æœ¬æ¥è‡ªé”™è¯¯åˆ†å¸ƒ$q(x)$ï¼Œé‚£ä¹ˆæœ‰ï¼š</p>
<script type="math/tex; mode=display">
P(z = 1 \space | \space x) = \frac{p(x)}{p(x) + q(x)} \\
then \\
\frac{P(z=1 \space | \space x)}{P(z=0 \space | \space x)}  = \frac{p(x)}{q(x)}</script><p>å…¶ä¸­$P(z = 1 \space | \space x)$è¡¨ç¤ºè®­ç»ƒçš„åˆ†ç±»å™¨åœ¨è¾“å…¥æ ·æœ¬ä¸º$x$çš„æƒ…å†µä¸‹ï¼Œåˆ¤æ–­æ ·æœ¬æ¥è‡ªæ­£ç¡®åˆ†å¸ƒçš„æ¦‚ç‡ã€‚å¦‚æœäºŒåˆ†ç±»å™¨ä½¿ç”¨logistic regressionï¼Œé‚£ä¹ˆ$P(z = 1 \space | \space x) = \frac{1}{1+e^(-h(x))}$($h$ä¸ºçº¿æ€§å›å½’å‡½æ•°)ï¼Œé‚£ä¹ˆä¹Ÿæœ‰$\frac{p(x)}{q(x)} = e^(h(x))$ã€‚</p>
<p>å› æ­¤ï¼Œç”±ä¸Šé¢çš„æ¨å¯¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºè§£å†³Covariate Shiftçš„æ–¹æ³•ï¼š</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ç”¨äºåŸæ¥æœºå™¨å­¦ä¹ ä»»åŠ¡çš„è®­ç»ƒé›†ï¼š$\{(x_1, \space y_1), \space \dots , \space (x_n, \space y_n)\}$ä»¥åŠç”¨äºæµ‹è¯•ç”¨çš„æµ‹è¯•$\{(u_1, \space v_1), \space \dots , \space (u_m, \space v_m)\}$</p>
<p>1ã€ç”Ÿæˆç”¨äºäºŒåˆ†ç±»å­¦ä¹ ç”¨çš„è®­ç»ƒé›†ï¼š$\{(x_1, \space 0), \space \dots , \space (x_n, \space 0), \space (u_1, \space 1), \space \dots , \space (u_m, \space 1)\}$</p>
<p>2ã€ç”¨ç¬¬ä¸€æ­¥ç”Ÿæˆçš„è®­ç»ƒé›†å­¦ä¹ ä¸€ä¸ªlogistic regressionçš„äºŒåˆ†ç±»å™¨æ¥å¾—åˆ°å…¶ä¸­çš„çº¿å½¢å›å½’å‡½æ•°$h$</p>
<p>3ã€å°†$e^(h(x_i))$æˆ–è€…æ›´å¥½çš„$min(e^(h(x_1)), \space c)$($c$æ˜¯ä¸€ä¸ªå¸¸é‡)ä½œä¸ºæƒé‡ï¼Œç”¨äºåŸå§‹è®­ç»ƒé›†$\{(x_1, \space y_1), \space \dots , \space (x_n, \space y_n)\}$ä¸Š</p>
<p>æ³¨æ„ï¼Œè¿™ä¸ªç®—æ³•ä¾èµ–äºä¸€ä¸ªå‰æï¼Œé‚£å°±æ˜¯$q(x_i)$ä¸èƒ½ä¸º0ã€‚</p>
<h2 id="Label-Shift-çº æ­£æ–¹æ³•"><a href="#Label-Shift-çº æ­£æ–¹æ³•" class="headerlink" title="Label Shift çº æ­£æ–¹æ³•"></a>Label Shift çº æ­£æ–¹æ³•</h2><p>//TODO: lable shift çº æ­£çš„æ€è·¯å’ŒCovariate Shiftä¸€æ ·ï¼Œåªæ˜¯è§£å†³æ–¹æ³•æœ‰ç‚¹ä¸å¥½ç†è§£ã€‚åç»­å†è¡¥ä¸Š</p>
<h2 id="Consept-Shiftçº æ­£æ–¹æ³•"><a href="#Consept-Shiftçº æ­£æ–¹æ³•" class="headerlink" title="Consept Shiftçº æ­£æ–¹æ³•"></a>Consept Shiftçº æ­£æ–¹æ³•</h2><p>å¯¹äºconcept shiftçš„çº æ­£æ–¹æ³•ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç›´æ¥åœ¨ä¹‹å‰è®­ç»ƒå‡ºæ¥çš„ç¥ç»ç½‘ç»œçš„å‚æ•°ä¸Šï¼Œä½¿ç”¨æ–°çš„è®­ç»ƒé›†è¿›è¡Œé‡æ–°è®­ç»ƒå³å¯ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://swordandtea.github.io/2021/02/23/design_patterns/%E7%BB%93%E6%9E%84%E6%80%A7%E6%A8%A1%E5%BC%8F/%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="SwordAndTea">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiangwei's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/23/design_patterns/%E7%BB%93%E6%9E%84%E6%80%A7%E6%A8%A1%E5%BC%8F/%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">ç»„åˆæ¨¡å¼</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-02-23 14:24:02" itemprop="dateCreated datePublished" datetime="2021-02-23T14:24:02+08:00">2021-02-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-03-03 17:05:19" itemprop="dateModified" datetime="2021-03-03T17:05:19+08:00">2021-03-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/design-pattern/" itemprop="url" rel="index">
                    <span itemprop="name">design pattern</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>70</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>1 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ç»„åˆæ¨¡å¼ç®€ä»‹"><a href="#ç»„åˆæ¨¡å¼ç®€ä»‹" class="headerlink" title="ç»„åˆæ¨¡å¼ç®€ä»‹"></a>ç»„åˆæ¨¡å¼ç®€ä»‹</h1><p>ç»„åˆæ¨¡å¼å°†å¯¹è±¡ç»„åˆæˆæ ‘çŠ¶ç»“æ„</p>
<h1 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX_CHILD_COMPONENT_COUNT 10</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Component</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleComponent</span>:</span> <span class="keyword">public</span> Component &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">execute</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="comment">//execute</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CompositeComponent</span>:</span> <span class="keyword">public</span> Component &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Component* children[MAX_CHILD_COMPONENT_COUNT];</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(Component* child)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">remove</span><span class="params">(Component *child)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">execute</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> child : children) &#123;</span><br><span class="line">            child-&gt;execute();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://swordandtea.github.io/2021/02/22/design_patterns/%E7%BB%93%E6%9E%84%E6%80%A7%E6%A8%A1%E5%BC%8F/%E6%A1%A5%E6%8E%A5%E5%99%A8%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="SwordAndTea">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiangwei's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/22/design_patterns/%E7%BB%93%E6%9E%84%E6%80%A7%E6%A8%A1%E5%BC%8F/%E6%A1%A5%E6%8E%A5%E5%99%A8%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">æ¡¥æ¥å™¨æ¨¡å¼</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-02-22 20:26:31" itemprop="dateCreated datePublished" datetime="2021-02-22T20:26:31+08:00">2021-02-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-03-03 17:05:08" itemprop="dateModified" datetime="2021-03-03T17:05:08+08:00">2021-03-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/design-pattern/" itemprop="url" rel="index">
                    <span itemprop="name">design pattern</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>380</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>1 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªå«<code>å½¢çŠ¶(shape)</code>çš„åŸºç±»ï¼Œå®ƒæ‰©å±•å‡ºæ¥ä¸¤ä¸ªå­ç±»ï¼š<code>åœ†å½¢(Circle)å’Œæ–¹å½¢(Square)</code>ï¼ŒåŒæ—¶ä½ å¸Œæœ›å¯¹è¿™ä¸¤ä¸ªå½¢çŠ¶æ·»åŠ é¢œè‰²ï¼ˆçº¢è‰²å’Œè“è‰²ï¼‰ï¼Œä¸€ä¸ªæ–¹æ³•æ˜¯åŸºäºç»§æ‰¿ï¼ŒåŸºäºåœ†å½¢å’Œæ–¹å½¢åˆ†åˆ«åˆ›å»ºä¸¤ä¸ªå­ç±»ï¼Œå¦‚<code>RedCircle</code>å’Œ<code>RedSquare</code>ã€‚è¿™æ ·çš„é—®é¢˜æ˜¯ï¼Œæ¯å¢åŠ æ–°çš„å½¢çŠ¶å’Œé¢œè‰²ï¼Œéƒ½éœ€è¦åˆ›å»ºæ›´å¤šçš„å­ç±»ã€‚å¦å¤–ä¸€ç§æ–¹æ³•å°±æ˜¯å°†é¢œè‰²æŠ½è±¡æˆä¸€ä¸ªç±»ï¼Œç„¶åè®©å½¢çŠ¶ç±»æœ‰ä¸€ä¸ªé¢œè‰²çš„æˆå‘˜å˜é‡ï¼Œç°åœ¨å½¢çŠ¶ç±»å¯ä»¥å°†æ‰€æœ‰ä¸é¢œè‰²ç›¸å…³çš„å·¥ä½œå§”æ´¾ç»™è‡ªå·±çš„é¢œè‰²æˆå‘˜å˜é‡ã€‚</p>
<h1 id="æ¡¥æ¥æ¨¡å¼ç®€ä»‹"><a href="#æ¡¥æ¥æ¨¡å¼ç®€ä»‹" class="headerlink" title="æ¡¥æ¥æ¨¡å¼ç®€ä»‹"></a>æ¡¥æ¥æ¨¡å¼ç®€ä»‹</h1><p>æ¡¥æ¥æ¨¡å¼æ¨¡å¼å¯ä»¥çœ‹ä½œä¸€ç§æœ€ç®€å•çš„ç»„åˆï¼Œå¤–éƒ¨åªå’Œç»„åˆç±»äº¤äº’ï¼Œè€Œä¸ä¼šæ¥è§¦åˆ°å†…éƒ¨çš„è¢«ç»„åˆçš„ç±»ã€‚</p>
<h1 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h1><p>é¥æ§å™¨å’Œå¯é¥æ§è®¾å¤‡ç›´æ¥çš„æ¡¥æ¥ç¤ºä¾‹ï¼Œç”¨æˆ·åªç›´æ¥ä½¿ç”¨é¥æ§å™¨ï¼Œè€Œä¸ä¼šç›´æ¥å’Œè®¾å¤‡è¿›è¡Œäº¤äº’ã€‚</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Device</span> &#123;</span></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    <span class="keyword">int</span> _volume;</span><br><span class="line">    <span class="keyword">int</span> _channel;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">isEnabled</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">enable</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">disable</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getVolume</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setVolume</span><span class="params">(<span class="keyword">int</span> volume)</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getChannel</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">setChannel</span><span class="params">(<span class="keyword">int</span> channel)</span> </span>= <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Remote</span> &#123;</span></span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line">    Device *_device;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Remote(Device *device): _device(device) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">togglePower</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (_device-&gt;isEnabled()) &#123;</span><br><span class="line">            _device-&gt;disable();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            _device-&gt;enabel();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">volumeDown</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        _device-&gt;setVolume(_device-&gt;getVolume() - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">volumeUp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        _device-&gt;setVolume(_device-&gt;getVolume() + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">channelDown</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        _device-&gt;setChannel(_device-&gt;getChannel() - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">channelUp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        _device-&gt;setChannel(_device-&gt;getChannel() + <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Radio</span>:</span> <span class="keyword">public</span> Device &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//function implementations</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TV</span>:</span> <span class="keyword">public</span> Device &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//function implementations</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æ¡¥æ¥æ¨¡å¼é€šå¸¸ä¼šç”¨äºå¼€å‘å‰æœŸè¿›è¡Œè®¾è®¡ï¼Œ</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://swordandtea.github.io/2021/02/22/design_patterns/%E7%BB%93%E6%9E%84%E6%80%A7%E6%A8%A1%E5%BC%8F/%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="SwordAndTea">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiangwei's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/22/design_patterns/%E7%BB%93%E6%9E%84%E6%80%A7%E6%A8%A1%E5%BC%8F/%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">é€‚é…å™¨æ¨¡å¼</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-02-22 18:19:39" itemprop="dateCreated datePublished" datetime="2021-02-22T18:19:39+08:00">2021-02-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-01-16 11:07:45" itemprop="dateModified" datetime="2022-01-16T11:07:45+08:00">2022-01-16</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/design-pattern/" itemprop="url" rel="index">
                    <span itemprop="name">design pattern</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>480</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>2 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>é€‚é…å™¨æ¨¡å¼ç›®çš„æ˜¯ä¸ºäº†è®©æ¥å£ä¸å…¼å®¹çš„å¯¹è±¡èƒ½å¤Ÿç›¸äº’åˆä½œï¼Œä¾‹å¦‚ä¸€ä¸ªæµæ•°æ®å¤„ç†çš„ç¬¬ä¸‰æ–¹åº“ï¼Œå®ƒç›®å‰åªèƒ½å¤„ç†XMLæ ¼å¼è¾“å…¥çš„æ•°æ®ï¼Œä½†æ˜¯ä½ è‡ªå·±ä»ç”Ÿäº§ç¯å¢ƒè·å–åˆ°æ•°æ®æµæ˜¯JSONæ ¼å¼çš„ï¼Œå› æ­¤ä½ æ— æ³•ç›´æ¥ä½¿ç”¨è¿™ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œå› ä¸ºå®ƒæ‰€éœ€çš„è¾“å…¥æ•°æ®ä¸ä½ çš„ç¨‹åºä¸å…¼å®¹ã€‚</p>
<p>ä½ å¯ä»¥ä¿®æ”¹è¿™ä¸ªç¬¬ä¸‰æ–¹åº“æ¥æ”¯æŒJSONï¼Œä½†æ˜¯è¿™å¯èƒ½éœ€è¦ä¿®æ”¹å…¶ä»–ä¾èµ–è¿™ä¸ªç¬¬ä¸‰åº“çš„ç°æœ‰ä»£ç ï¼Œç”šè‡³ä½ å¯èƒ½æ ¹æœ¬å°±æ²¡æœ‰è¿™ä¸ªç¬¬ä¸‰æ–¹åº“çš„æºä»£ç ã€‚</p>
<p>è¿™æ—¶ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªé€‚é…å™¨ï¼Œå®ƒç”¨äºå°†JSONæ ¼å¼æ•°æ®è½¬æ¢ä¸ºXMLæ ¼å¼çš„æ•°æ®ï¼Œå¹¶è°ƒç”¨ç¬¬ä¸‰æ–¹åº“è¿›è¡Œæ•°æ®å¤„ç†ï¼Œä½ çš„ä»£ç ä¹‹åå°±ä¸è¿™ä¸ªé€‚é…å™¨è¿›è¡Œäº¤äº’ã€‚</p>
<h1 id="é€‚é…å™¨æ¨¡å¼ç®€ä»‹"><a href="#é€‚é…å™¨æ¨¡å¼ç®€ä»‹" class="headerlink" title="é€‚é…å™¨æ¨¡å¼ç®€ä»‹"></a>é€‚é…å™¨æ¨¡å¼ç®€ä»‹</h1><ul>
<li>é€‚é…å™¨å®ç°ä¸å…¶ä¸­ä¸€ä¸ªç°æœ‰å¯¹è±¡å…¼å®¹çš„æ¥å£</li>
<li>å…¶ä»–å¯¹è±¡å¯ä»¥ä½¿ç”¨è¯¥æ¥å£å®‰å…¨å¾—è°ƒç”¨é€‚é…å™¨æ–¹æ³•</li>
<li>é€‚é…å™¨æ–¹æ³•è¢«è°ƒç”¨åå†è°ƒç”¨å…¶å†…éƒ¨å¯¹è±¡çš„æ¥å£</li>
</ul>
<font color="orange">æœ‰æ—¶ä½ ç”šè‡³å¯ä»¥åˆ›å»ºä¸€ä¸ªåŒå‘é€‚é…å™¨æ¥å®ç°åŒå‘è½¬æ¢è°ƒç”¨</font>



<h1 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h1><p>ç»å…¸çš„æ–¹é’‰åœ†å­”é—®é¢˜ï¼š</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RoundReg</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> _radius;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    RoundReg(<span class="keyword">int</span> radius): _radius(radius) &#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getRadius</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> _radius</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RoundHole</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> _radius;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    RoundHole(<span class="keyword">int</span> radius): _radius(radius) &#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getRadius</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> _radius</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">bool</span> fits(RoundReg &amp;roundReg) &#123;</span><br><span class="line">        <span class="keyword">return</span> _radius == roundReg.getRadius()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SquareReg</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> _edge;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    SquareReg(<span class="keyword">int</span> edge): _edge(edge) &#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getEdge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> _edge;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SquarePegAdapter</span>:</span> RoundReg &#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    SquareReg _squareReg;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    SquarePegAdapter(<span class="keyword">const</span> SquareReg&amp; peg): _squareReg(peg) &#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getRadius</span><span class="params">()</span> <span class="keyword">override</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> _squareReg.getEdge() * <span class="built_in">sqrt</span>(<span class="number">2</span>) / <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>SquarePegAdapterå†…éƒ¨å°è£…äº†SquareRegï¼ŒRoundHoleä¸èƒ½ç›´æ¥å’ŒSquareRegäº¤äº’ï¼Œè€Œå’ŒSquarePegAdapterè¿›è¡Œäº¤äº’ã€‚</p>
<p>è™½ç„¶SquarePegAdapterç»§æ‰¿è‡ªRoundRegï¼Œä½†æ˜¯è¿™é‡Œç»§æ‰¿çš„ç›®çš„åªæ˜¯ä¸ºäº†è·å–å’ŒRoundRegç›¸åŒçš„æ¥å£è€Œå·²ï¼ŒSquareRegAdapterç›¸å½“äºä¸ºSquarePegå¢åŠ äº†æ–°çš„æ¥å£</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://swordandtea.github.io/2021/02/20/machine_learning/neural_network&deep_learning/parameter-initialization/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="SwordAndTea">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiangwei's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/20/machine_learning/neural_network&deep_learning/parameter-initialization/" class="post-title-link" itemprop="url">parameter_initialization</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-02-20 17:27:22" itemprop="dateCreated datePublished" datetime="2021-02-20T17:27:22+08:00">2021-02-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-02-23 20:43:34" itemprop="dateModified" datetime="2021-02-23T20:43:34+08:00">2021-02-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/machine-learning/" itemprop="url" rel="index">
                    <span itemprop="name">machine learning</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>576</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>2 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>åœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œå‚æ•°åˆå§‹åŒ–ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ä¸€æ­¥ï¼Œç³Ÿç³•çš„åˆå§‹å‚æ•°å¯èƒ½ä¼šå¯¼è‡´æ¨¡å‹åœ¨è®­ç»ƒæ—¶é‡åˆ°<code>æ¢¯åº¦æ¶ˆå¤±</code>å’Œ<code>æ¢¯åº¦çˆ†ç‚¸</code>è¿™ä¸¤ä¸ªæƒ…å†µ</p>
<h1 id="æ¢¯åº¦æ¶ˆå¤±"><a href="#æ¢¯åº¦æ¶ˆå¤±" class="headerlink" title="æ¢¯åº¦æ¶ˆå¤±"></a>æ¢¯åº¦æ¶ˆå¤±</h1><p>æ¢¯åº¦æ¶ˆå¤±æ˜¯æŒ‡åœ¨è®­ç»ƒæ˜¯ï¼Œå‚æ•°çš„æ¢¯åº¦å˜ä¸º0ï¼Œæˆ–è€…æ˜¯éå¸¸æ¥è¿‘0ï¼Œå¯¼è‡´å‚æ•°åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ä¸å†æ›´æ–°æˆ–è€…è¯´æ›´æ–°å¾ˆå°ã€‚</p>
<p>é™¤äº†ç³Ÿç³•çš„åˆå§‹åŒ–å‚æ•°ï¼Œ<font color="orange">å¦å¤–ä¸€ä¸ªå¯¼è‡´æ¢¯åº¦æ¶ˆå¤±åŸå› æ˜¯æ¿€æ´»å‡½æ•°çš„é€‰æ‹©</font>ï¼Œæ›¾ç»ï¼Œsigmoidå‡½æ•°$\frac{1}{1+e^{-x}}$å¸¸å¸¸ä½œä¸ºæ¿€æ´»å‡½æ•°ï¼Œä½†æ˜¯sigmoidå‡½æ•°çš„æ¢¯åº¦åœ¨è‡ªå˜é‡è¾ƒå°å’Œè‡ªå˜é‡è¾ƒå¤§æ—¶ï¼Œå¯¹åº”çš„å¯¼æ•°å€¼éƒ½éå¸¸æ¥è¿‘0ï¼Œæ‰€ä»¥æ°´ç”¨sigmoidæ¿€æ´»å‡½æ•°å¾€å¾€ä¼šå¯¼è‡´æ¢¯åº¦æ¶ˆå¤±çš„é—®é¢˜ã€‚æ‰€ä»¥ç°åœ¨å¤§å®¶åŸºæœ¬ä¸Šéƒ½é€‰æ‹©ReLUå‡½æ•°ä½œä¸ºé»˜è®¤çš„æ¿€æ´»å‡½æ•°ã€‚</p>
<h1 id="æ¢¯åº¦çˆ†ç‚¸"><a href="#æ¢¯åº¦çˆ†ç‚¸" class="headerlink" title="æ¢¯åº¦çˆ†ç‚¸"></a>æ¢¯åº¦çˆ†ç‚¸</h1><p>æ¢¯åº¦çˆ†ç‚¸æ˜¯æŒ‡åœ¨è®­ç»ƒæ—¶ï¼Œå‚æ•°çš„æ¢¯åº¦å˜å¾—éå¸¸å¤§ã€‚</p>
<h1 id="å‚æ•°å¯¹ç§°é—®é¢˜"><a href="#å‚æ•°å¯¹ç§°é—®é¢˜" class="headerlink" title="å‚æ•°å¯¹ç§°é—®é¢˜"></a>å‚æ•°å¯¹ç§°é—®é¢˜</h1><p>å¦‚æœåˆå§‹åŒ–å‚æ•°æ—¶ï¼Œå¦‚æœå‚æ•°å‡ºç°å¾ˆå¤šç›¸ä¼¼çš„å‚æ•°ï¼Œé‚£ä¸ªå°±å¯èƒ½ä¼šå¯¼è‡´å¤šä¸ªç¥ç»å…ƒè¡¨ç°å¾—åƒä¸€ä¸ªç¥ç»å…ƒã€‚ä¸€ä¸ªæç«¯çš„ä¾‹å­ï¼Œå¦‚æœåœ¨è¾“å‡ºåŒ–å‚æ•°æ—¶ï¼Œæ‰€æœ‰å‚æ•°éƒ½åˆå§‹åŒ–ä¸ºä¸€ä¸ªå¸¸æ•°ï¼Œå¦‚æœè¾“å…¥æ ·æœ¬çš„ç‰¹å¾ä¹Ÿæ˜¯ç›¸åŒçš„è¯ï¼Œé‚£ä¹ˆå¯¹äºæ¯æ¬¡è¿­ä»£ï¼Œæ¯ä¸ªå‚æ•°çš„åå¯¼æ•°å€¼ä¹Ÿæ˜¯ç›¸åŒçš„ï¼Œæ›´æ–°ä¹‹åçš„å€¼ä¹Ÿæ˜¯ç›¸åŒçš„ï¼Œé‚£ä¹ˆè¿™äº›ç¥ç»å…ƒå°±å’Œä¸€ä¸ªç¥ç»å…ƒçš„æ•ˆæœä¸€æ ·äº†ã€‚</p>
<h1 id="å‚æ•°åˆå§‹åŒ–çš„æ–¹æ³•"><a href="#å‚æ•°åˆå§‹åŒ–çš„æ–¹æ³•" class="headerlink" title="å‚æ•°åˆå§‹åŒ–çš„æ–¹æ³•"></a>å‚æ•°åˆå§‹åŒ–çš„æ–¹æ³•</h1><h2 id="Default-Initialization"><a href="#Default-Initialization" class="headerlink" title="Default Initialization"></a>Default Initialization</h2><p>åœ¨ä½¿ç”¨æ·±åº¦å­¦ä¹ æ¡†æ¶åˆ›å»ºç½‘ç»œæ—¶ï¼Œå¦‚æœæ˜¯ä¼ å…¥æ¨¡å‹åˆå§‹åŒ–æ–¹æ³•çš„å‚æ•°ï¼Œåˆ™ä¼šä½¿ç”¨æ·±åº¦å­¦ä¹ æ¡†æ¶é»˜è®¤çš„å‚æ•°åˆå§‹åŒ–æ–¹æ³•ï¼Œé€šå¸¸ä¸ä¼šå‡ºç°ä»€ä¹ˆå¤§é—®é¢˜ã€‚</p>
<h2 id="Xavier-Initialization"><a href="#Xavier-Initialization" class="headerlink" title="Xavier Initialization"></a>Xavier Initialization</h2><p>Xavier Initializationä½¿ç”¨æœŸæœ›ä¸º0ï¼Œæ–¹å·®ä¸º$\frac{2}{n_{in} + n_{out}}$çš„æ­£æ€åˆ†å¸ƒæ¥åˆå§‹åŒ–å‚æ•°ï¼Œå…¶ä¸­$n_{in}$ä¸º<font color="orange">å½“å‰å±‚</font>çš„è¾“å…¥ç¥ç»å…ƒä¸ªæ•°ï¼Œ$n_{out}$ä¸ºå½“å‰å±‚çš„è¾“å‡ºç¥ç»å…ƒçš„ä¸ªæ•°ï¼Œå³ä¸‹ä¸€å±‚ç¥ç»å…ƒçš„ä¸ªæ•°ã€‚</p>
<h1 id="others"><a href="#others" class="headerlink" title="others"></a>others</h1><p>ç¥ç»ç½‘ç»œä¸­çš„å‚æ•°åˆå§‹åŒ–æ–¹æ³•ä¹Ÿæ˜¯ç›®å‰ç ”ç©¶çš„ä¸€ä¸ªé¢†åŸŸ</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://swordandtea.github.io/2021/02/13/machine_learning/neural_network&deep_learning/dropout/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="SwordAndTea">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiangwei's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/13/machine_learning/neural_network&deep_learning/dropout/" class="post-title-link" itemprop="url">dropout</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-02-13 10:49:18" itemprop="dateCreated datePublished" datetime="2021-02-13T10:49:18+08:00">2021-02-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-04-03 20:43:35" itemprop="dateModified" datetime="2021-04-03T20:43:35+08:00">2021-04-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/machine-learning/" itemprop="url" rel="index">
                    <span itemprop="name">machine learning</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>811</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>3 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>é€šå¸¸ï¼Œåœ¨æ·±åº¦å­¦ä¹ ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨æŸå¤±å‡½æ•°ä¸­æ·»åŠ æ­£åˆ™åŒ–é¡¹æ¥é¿å…è¿‡æ‹Ÿåˆï¼ŒL2æ­£åˆ™åŒ–é¡¹æ˜¯é€šå¸¸ä½¿ç”¨çš„æ­£åˆ™åŒ–é¡¹ï¼ŒL2æ­£åˆ™åŒ–é¡¹ä½¿å¾—æ¨¡å‹æœ€ç»ˆçš„æƒé‡å€¼åˆ†å¸ƒæ¯”è¾ƒå‡åŒ€ï¼Œ<font color="orange">ä½¿ç”¨L2æ­£åˆ™åŒ–é¡¹æ—¶ï¼Œæˆ‘ä»¬å°±å‡è®¾äº†æˆ‘ä»¬çš„æ¨¡å‹çš„å¯¹äºæ ·æœ¬çš„æ¯ä¸ªç‰¹å¾éƒ½ç›¸ä¼¼çš„çœ‹é‡ï¼Œè€Œä¸åªæ˜¯çœ‹é‡æŸå‡ ä¸ªå¯èƒ½æ˜¯å…³é”®ç‰¹å¾çš„ç‰¹å¾ã€‚</font></p>
<font color="orange">å¯¹äºçº¿å½¢æ¨¡å‹ï¼Œåœ¨æ ·æœ¬ç‰¹å¾å¤šæ ·æœ¬æ•°é‡å°‘çš„æƒ…å†µä¸‹ï¼Œçº¿å½¢æ¨¡å‹å¾ˆæœ‰å¯èƒ½ä¼šè¿‡æ‹Ÿåˆï¼Œä½†æ˜¯åªè¦å¢åŠ æ ·æœ¬æ•°é‡ï¼Œçº¿å½¢æ¨¡å‹å¤§æ¦‚ç‡å°±èƒ½æ‘†è„±è¿‡æ‹Ÿåˆçš„é£é™©ã€‚</font>ä½†æ˜¯çº¿å½¢è¿™ç§å¯é çš„ç‰¹æ€§ä¹Ÿæ˜¯æœ‰ä»£ä»·çš„ï¼Œçº¿å½¢æ¨¡å‹ä¸å…³ç³»æ ·æœ¬ç‰¹å¾ä¹‹é—´çš„å…³ç³»ã€‚å¯¹äºæ¯ä¸ªæ ·æœ¬ç‰¹å¾ï¼Œçº¿å½¢æ¨¡å‹å°±åªæ˜¯è¦ä¹ˆç»™ä¸€ä¸ªæ­£çš„æƒé‡æˆ–è€…è´Ÿçš„æƒé‡ï¼Œè€Œä¸ä¼šè€ƒè™‘ä»»ä½•èƒŒæ™¯ä¿¡æ¯ã€‚

ä¸åŒäºçº¿å½¢æ¨¡å‹ï¼Œç¥ç»ç½‘ç»œé€šå¸¸ä¸ä¼šç‹¬ç«‹å¯¹å¾…æ¯ä¸ªæ ·æœ¬ç‰¹å¾ï¼Œç¥ç»ç½‘ç»œèƒ½å¤Ÿå­¦ä¹ æ ·æœ¬ä¹‹é—´çš„å…³ç³»ï¼Œ<font color="red">ä½†æ˜¯ï¼Œå¯¹äºæ·±åº¦ç¥ç»ç½‘ç»œæ¥è¯´ï¼Œå³ä½¿æ ·æœ¬æ•°é‡è¿œè¿œå¤šäºæ ·æœ¬ç‰¹å¾ï¼Œæ·±åº¦ç¥ç»ç½‘ç»œä»ç„¶ä¼šæœ‰è¿‡æ‹Ÿåˆçš„é£é™©ã€‚</font>

<p>åŒæ—¶æ¥è¯´ï¼Œä½¿ç”¨ç®€å•çš„æ¨¡å‹å¯ä»¥é¿å…è¿‡æ‹Ÿåˆã€‚ä½¿ç”¨æ›´å°‘çº¬åº¦çš„ç‰¹å¾ã€ä½¿ç”¨æ­£åˆ™åŒ–é¡¹è®©æƒé‡å€¼åˆ†å¸ƒæ¯”è¾ƒå‡åŒ€éƒ½å¯ä»¥è®©æ¨¡å‹å˜å¾—ç®€å•ã€‚å¦å¤–è¿˜æœ‰ä¸€ç§è®©æ¨¡å‹å˜å¾—ç®€å•çš„æ–¹æ³•å«åš<code>å…‰æ»‘(smoothness)</code>ï¼Œå³æ¨¡å‹ä¸ä¼šå¯¹è¾“å…¥çš„ç»†å¾®æ”¹å˜è€Œæ•æ„Ÿã€‚</p>
<font color="orange">åœ¨ç¥ç»ç½‘ç»œä¸­ï¼Œè®­ç»ƒæ—¶ï¼Œå¯¹äºæ¯å±‚ç½‘ç»œå‘åä¼ æ’­çš„è¿‡ç¨‹ä¸­ï¼Œå¼•å…¥å™ªå£°å°±èƒ½è®©ç¥ç»ç½‘ç»œå˜å¾—`å…‰æ»‘`ï¼Œè¿™ç§æ–¹æ³•è¢«å«åšdropoutã€‚</font>è¿™ç§æ–¹æ³•å·²ç»æˆä¸ºäº†ä¸€ç§è®­ç»ƒç¥ç»ç½‘ç»œçš„æ ‡å‡†æ–¹æ³•ã€‚å«åšdropoutçš„åŸå› æ˜¯å› ä¸ºåœ¨è®­ç»ƒæ—¶å¯¹äºæ¯å±‚ç½‘ç»œæˆ‘ä»¬éƒ½ä¼šéšæœºä¸¢å¼ƒä¸€äº›ç¥ç»å…ƒã€‚<font color="red">åœ¨ä¸¢å¼ƒç¥ç»å…ƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦ä¿è¯ä¸¢å¼ƒåçš„è¯¥å±‚ç½‘ç»œç¥ç»å…ƒçš„æœŸæœ›å€¼å’Œä¸¢å¼ƒå‰çš„å€¼æ˜¯ä¸€è‡´çš„ã€‚</font>



<h1 id="dropoutå‡½æ•°"><a href="#dropoutå‡½æ•°" class="headerlink" title="dropoutå‡½æ•°"></a>dropoutå‡½æ•°</h1><p>åœ¨æ ‡å‡†çš„dropoutä¸­ï¼Œå…¶å®šä¹‰ä¸ºï¼šå¯¹äº<font color="orange">æ¯å±‚</font>çš„æ¯ä¸ª<font color="orange">ç¥ç»</font>å…ƒï¼Œéƒ½æœ‰$p$çš„æ¦‚ç‡ä¸¢å¼ƒæ‰ï¼ˆç½®é›¶ï¼‰ï¼Œå¦‚æœæ²¡æœ‰ä¸¢å¼ƒï¼Œåˆ™å€¼å˜ä¸º$\frac{x}{1-p}$ï¼Œ$x$ä¸ºè¯¥ç¥ç»å…ƒçš„åŸå§‹è¾“å‡ºå€¼ã€‚å³ï¼š</p>
<script type="math/tex; mode=display">
x' = 
\begin{cases} 
    0, \space with \space probability \space p \\
    \frac{x}{1-p}, \space otherwise
\end{cases}</script><p>å¯ä»¥è¯æ˜$E(x) = x$</p>
<h1 id="drop-out-ä»£ç å®ç°"><a href="#drop-out-ä»£ç å®ç°" class="headerlink" title="drop out ä»£ç å®ç°"></a>drop out ä»£ç å®ç°</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dropout_layer</span>(<span class="params">one_layer: tf.tensor, dropout_probability: <span class="built_in">float</span></span>):</span></span><br><span class="line">    <span class="keyword">assert</span> <span class="number">0</span> &lt;= dropout_probability &lt;= <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> dropout_probability == <span class="number">1</span>:</span><br><span class="line">        <span class="comment"># in this case, all elements are dropped out</span></span><br><span class="line">        <span class="keyword">return</span> tf.zeros_like(one_layer)  <span class="comment"># tf.zeros_like: create a tensor with all elements set to zero</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> dropout_probability == <span class="number">0</span>:</span><br><span class="line">        <span class="comment"># in this case, all elements are kept</span></span><br><span class="line">        <span class="keyword">return</span> one_layer</span><br><span class="line"></span><br><span class="line">    <span class="comment"># tf.random.uniform: outputs random values from a uniform distribution.</span></span><br><span class="line">    <span class="comment"># with (1-p)&#x27;s probability that value will become x / (1-p)</span></span><br><span class="line">    mask = tf.random.uniform(shape=tf.shape(one_layer), minval=<span class="number">0</span>, maxval=<span class="number">1</span>) &lt; (<span class="number">1</span> - dropout_probability)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> tf.cast(mask, dtype=tf.float32) * one_layer / (<span class="number">1.0</span> - dropout_probability)</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># åœ¨æ¡†æ¶ä¸­ä½¿ç”¨å¿«é€Ÿè°ƒç”¨drop out</span></span><br><span class="line">net = tf.keras.models.Sequential([tf.keras.layers.Dense(<span class="number">256</span>, activation=tf.nn.relu,</span><br><span class="line">                                                        kernel_regularizer=tf.keras.regularizers.l2(<span class="number">0.3</span>)),</span><br><span class="line">                                  tf.keras.layers.Dropout(<span class="number">0.5</span>),</span><br><span class="line">                                  tf.keras.layers.Dense(<span class="number">256</span>, activation=tf.nn.relu,</span><br><span class="line">                                                        kernel_regularizer=tf.keras.regularizers.l2(<span class="number">0.3</span>)),</span><br><span class="line">                                  tf.keras.layers.Dropout(<span class="number">0.2</span>),</span><br><span class="line">                                  tf.keras.layers.Dense(<span class="number">10</span>)])</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://swordandtea.github.io/2021/02/04/machine_learning/neural_network&deep_learning/multilayer-perceptrons/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="SwordAndTea">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiangwei's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/04/machine_learning/neural_network&deep_learning/multilayer-perceptrons/" class="post-title-link" itemprop="url">multilayer_perceptrons</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-02-04 07:41:24" itemprop="dateCreated datePublished" datetime="2021-02-04T07:41:24+08:00">2021-02-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-02-05 07:59:34" itemprop="dateModified" datetime="2021-02-05T07:59:34+08:00">2021-02-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/machine-learning/" itemprop="url" rel="index">
                    <span itemprop="name">machine learning</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>714</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>2 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="éšè—å±‚"><a href="#éšè—å±‚" class="headerlink" title="éšè—å±‚"></a>éšè—å±‚</h1><p>åœ¨è®¸å¤šå­¦ä¹ ä»»åŠ¡ä¸­ï¼Œæ ·æœ¬çš„ç‰¹å¾å’Œè¾“å‡ºæ ‡ç­¾ä¹‹é—´å¹¶ä¸æ˜¯çº¿å½¢å…³ç³»ã€‚å¯¹äºå•å±‚ç¥ç»ç½‘ç»œï¼Œå®ƒçš„èƒ½å¤„ç†çš„å­¦ä¹ ä»»åŠ¡æ¯”è¾ƒæœ‰é™ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨è¾“å…¥å±‚å’Œè¾“å‡ºå±‚ä¹‹é—´å¢åŠ ä¸€å±‚æˆ–å¤šå±‚çš„éšè—å±‚æ¥è§£å†³å¢åŠ æ¨¡å‹çš„å¤æ‚åº¦ï¼Œæ¥å¢åŠ æ¨¡å‹çš„å­¦ä¹ èƒ½åŠ›ã€‚<font color="red">ä½†æ˜¯å¦‚æœåªæ˜¯å¢åŠ éšè—å±‚ï¼Œè¿™ä¸ªç½‘ç»œä»ç„¶æ˜¯çº¿å½¢æ¨¡å‹ã€‚</font>åŸå› æ˜¯æ¯ç›¸é‚»çš„ä¸¤å±‚ç¥ç»ç½‘ç»œä¹‹é—´éƒ½æ˜¯ä¸€ä¸ªä»¿å°„å˜æ¢ï¼Œè€Œä»¿å°„å˜æ¢ä¹‹ä¸Šå†å åŠ ä¸€ä¸ªä»¿å°„å˜æ¢ï¼Œä»ç„¶æ˜¯ä¸€ä¸ªä»¿å°„å˜æ¢ã€‚<font color="orange">æ‰€ä»¥ä¸ºå°†çº¿å½¢çš„ç¥ç»ç½‘ç»œå˜æˆéçº¿æ€§çš„ç¥ç»ç½‘ç»œï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥æ¿€æ´»å‡½æ•°ã€‚</font>æ¿€æ´»å‡½æ•°å†³å®šä¸€ä¸ªä¸€ä¸ªç¥ç»å…ƒæ˜¯å¦åº”è¯¥ç»§ç»­å‚ä¸åç»­çš„è®¡ç®—ã€‚æ¿€æ´»å‡½æ•°é€šå¸¸æ˜¯éçº¿æ€§çš„å‡½æ•°ã€‚</p>
<h1 id="å¸¸ç”¨æ¿€æ´»å‡½æ•°"><a href="#å¸¸ç”¨æ¿€æ´»å‡½æ•°" class="headerlink" title="å¸¸ç”¨æ¿€æ´»å‡½æ•°"></a>å¸¸ç”¨æ¿€æ´»å‡½æ•°</h1><p>æ¿€æ´»å‡½æ•°å†³å®šä¸€ä¸ªä¸€ä¸ªç¥ç»å…ƒæ˜¯å¦åº”è¯¥ç»§ç»­å‚ä¸åç»­çš„è®¡ç®—ã€‚æ¿€æ´»å‡½æ•°é€šå¸¸æ˜¯éçº¿æ€§çš„å‡½æ•°</p>
<h2 id="ReLU-Function"><a href="#ReLU-Function" class="headerlink" title="ReLU Function"></a>ReLU Function</h2><p>ReLuæ¿€æ´»å‡½æ•°æ˜¯æœ€æµè¡Œçš„ä¸€ç§æ¿€æ´»å‡½æ•°ï¼Œåº”ä¸ºå®ƒçš„å®ç°ç®€å•å¹¶ä¸”ä½¿ç”¨ReLUçš„ç¥ç»ç½‘ç»œæ•ˆæœä¹Ÿå¾ˆå¥½ã€‚å®ƒçš„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
ReLU(x) = max(x, 0)</script><p>å³ReLUå‡½æ•°åªä¿ç•™æ­£å€¼çš„ç¥ç»å…ƒï¼Œå¹¶ä¸”åŸå°ä¸åŠ¨çš„è¿›è¡Œä¼ æ’­ï¼ŒåŒæ—¶å°†æ‰€æœ‰è´Ÿå€¼çš„ç¥ç»å…ƒä¸¢å¼ƒã€‚</p>
<p>å¯¹äºReLUå‡½æ•°çš„å¯¼æ•°æ¥è¯´ï¼Œå½“è‡ªå˜é‡å°äº0æ—¶ï¼ŒReLUå‡½æ•°çš„æ¢¯åº¦ç­‰äº0ï¼Œå½“è‡ªå˜é‡å¤§äº0æ—¶ï¼Œå‡½æ•°çš„æ¢¯åº¦ç­‰äº1ã€‚ä½†æ˜¯å½“è‡ªå˜é‡çš„å–å€¼ä¸º0æ—¶ï¼ŒReLuå‡½æ•°æ˜¯ä¸å¯å¯¼çš„ã€‚é€šå¸¸åœ¨å·¥ç¨‹ä¸Šçš„å¤„ç†æ˜¯ï¼Œå½“è‡ªå˜é‡ä¸º0æ—¶ï¼Œè®¤ä¸ºæ¢¯åº¦ç­‰äº0ã€‚</p>
<h2 id="pReLU-Function"><a href="#pReLU-Function" class="headerlink" title="pReLU Function"></a>pReLU Function</h2><p>pReLUå‡½æ•°æ˜¯ReLUå‡½æ•°çš„ä¸€ä¸ªå˜ç§ï¼Œå®ƒå…è®¸è´Ÿå€¼è¾“å…¥æœ‰é™çš„å‘åä¼ æ’­ï¼š</p>
<script type="math/tex; mode=display">
pReLU(x) = max(0, x) + \alpha min(0, x)</script><h2 id="Sigmoid-Function"><a href="#Sigmoid-Function" class="headerlink" title="Sigmoid Function"></a>Sigmoid Function</h2><p>åœ¨logistic-regressionä¸­æˆ‘ä»¬ä½¿ç”¨è¿‡sigmoid functionæ¥ä½œä¸ºå¯¹è¾“å‡ºçš„å¤„ç†ã€‚åŒæ—¶sigmoid å‡½æ•°ä¹Ÿå¯ä»¥ä½œä¸ºç¥ç»ç½‘ç»œä¸­çš„æ¿€æ´»å‡½æ•°ã€‚</p>
<script type="math/tex; mode=display">
sigmoid(x) = \frac{1}{1+e^{(-x)}}</script><p>sigmoidå‡½æ•°å°†å–å€¼ä¸ºä»»æ„å®æ•°çš„è¾“å…¥æ˜ å°„åˆ°ä¸€ä¸ªï¼ˆ0ï¼Œ1ï¼‰çš„åŒºé—´ï¼Œæ‰€ä»¥sigmoidå‡½æ•°ä¹Ÿè¢«å«åšsquashingå‡½æ•°ã€‚</p>
<p>sigmoidå‡½æ•°æ˜¯ä¸€ä¸ªå…‰æ»‘çš„ï¼Œä»»æ„é˜¶å¯å¯¼çš„å‡½æ•°ï¼Œå®ƒçš„ä¸€é˜¶å¯¼æ•°åœ¨è‡ªå˜é‡ä¸º0æ—¶æœ€å¤§ï¼Œä»0å‘ä¸¤è¾¹é€æ¸å‡å°ã€‚</p>
<p>sigmoid functioné€šå¸¸ç”¨äºäºŒåˆ†ç±»ä»»åŠ¡ç¥ç»ç½‘ç»œè¾“å‡ºå±‚çš„æ¿€æ´»å‡½æ•°ã€‚</p>
<h2 id="Tanh-Function"><a href="#Tanh-Function" class="headerlink" title="Tanh Function"></a>Tanh Function</h2><p>ç±»ä¼¼sigmoid functionï¼Œtanhï¼ˆhyperbolic tangentï¼‰ä¹Ÿå°†å®æ•°èŒƒå›´å†…çš„è¾“å…¥æŒ¤å‹åˆ°ï¼ˆ-1ï¼Œ1ï¼‰ä¹‹é—´çš„è¾“å‡ºã€‚</p>
<script type="math/tex; mode=display">
tanh(x) = \frac{1 - e^{(-2x)}}{1 + e^{(-2x)}}</script><p>tanhçš„å‡½æ•°å›¾åƒå’Œä¸€é˜¶å¯¼å‡½æ•°çš„å›¾åƒå’Œsigmoidå‡½æ•°ååˆ†ç±»ä¼¼ã€‚</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://swordandtea.github.io/2021/01/31/machine_learning/linear_model/softmax-regression/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="SwordAndTea">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiangwei's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/31/machine_learning/linear_model/softmax-regression/" class="post-title-link" itemprop="url">softmax_regress</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-31 16:17:48" itemprop="dateCreated datePublished" datetime="2021-01-31T16:17:48+08:00">2021-01-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-04-03 20:21:05" itemprop="dateModified" datetime="2021-04-03T20:21:05+08:00">2021-04-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/machine-learning/" itemprop="url" rel="index">
                    <span itemprop="name">machine learning</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>1.4k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>5 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="é—®é¢˜å¼•å‡º"><a href="#é—®é¢˜å¼•å‡º" class="headerlink" title="é—®é¢˜å¼•å‡º"></a>é—®é¢˜å¼•å‡º</h1><p>åœ¨å¤šåˆ†ç±»é—®é¢˜ä¸­ï¼Œä¸€äº›åˆ†ç±»å™¨æ˜¯åˆ©ç”¨å¤šä¸ªäºŒåˆ†ç±»å™¨æ¥åšåˆ†ç±»çš„ï¼Œæœ‰äº›æ¨¡å‹åˆ™èƒ½ç›´æ¥è¿›è¡Œå¤šåˆ†ç±»å­¦ä¹ ã€‚softmax-regresså°±æ˜¯ä¸€ç§èƒ½å¤Ÿç›´æ¥è¿›è¡Œå¤šåˆ†ç±»å­¦ä¹ çš„çº¿å½¢åˆ†ç±»æ¨¡å‹ï¼ˆè™½ç„¶å«regressï¼Œä½†æœ¬èº«æ˜¯åˆ†ç±»æ¨¡å‹ï¼Œæœ‰ç‚¹åƒlogistic-regressionï¼‰ã€‚</p>
<h1 id="one-hot-encoding"><a href="#one-hot-encoding" class="headerlink" title="one-hot encoding"></a>one-hot encoding</h1><p>å¯¹äºå¤šåˆ†ç±»å­¦ä¹ ä»»åŠ¡ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæŠŠå¯èƒ½çš„åˆ†ç±»ç»“æœç§ç±»ç”¨æ•°å­—æ¥è¡¨ç¤ºï¼Œä¾‹å¦‚å¯¹äºä¸€ä¸ªå¯èƒ½æœ‰3ç§åˆ†ç±»ç»“æœçš„å­¦ä¹ ä»»åŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨$\{1, 2, 3\}$æ¥åˆ†åˆ«è¡¨ç¤ºç¬¬ä¸€ç±»åˆ°ç¬¬ä¸‰ç±»ã€‚å¦‚æœä½¿ç”¨è¿™ä¸ªè‡ªç„¶åºç¼–ç æ¥å¯¹åˆ†ç±»ç»“æœç§ç±»è¿›è¡Œç¼–ç ï¼Œé‚£ä¹ˆå¯¹äºæ¯ä¸€ä¸ªè®­ç»ƒæ ·æœ¬ï¼Œæˆ‘ä»¬éœ€è¦çš„è¾“å‡ºå°±åªæœ‰ä¸€ä¸ªã€‚</p>
<p>ä½¿ç”¨è‡ªç„¶åºç¼–ç æ—¶ï¼Œå¦‚æœåˆ†ç±»ç»“æœä¹‹é—´æœ¬èº«æ²¡æœ‰è‡ªç„¶åºçš„å…³ç³»ï¼Œ å¯¹äºæ¨¡å‹çš„è¾“å‡ºå’Œæ ·æœ¬çœŸå®çš„æ ‡ç­¾ä¹‹é—´çš„è·ç¦»å°†ä¸å¥½è¡¨ç¤ºã€‚ä¾‹å¦‚å¯¹äºæŸä¸ªæ ·æœ¬æ¥è¯´ï¼Œæ¨¡å‹çš„è¾“å‡ºç»“æœæ˜¯1ï¼Œè¡¨ç¤ºç¬¬äºŒç±»ï¼Œä½†æ ·æœ¬çœŸå®çš„æ ‡ç­¾ä¸º3ï¼Œè¡¨ç¤ºç¬¬3ç±»ï¼Œæ­¤æ—¶å¦‚æœå°†è·ç¦»å®šä¹‰ä¸º$|1-3| = 2$ï¼Œè¿™åœ¨åˆ†ç±»ç»“æœä¹‹é—´æœ¬èº«æ²¡æœ‰è‡ªç„¶åºçš„å…³ç³»çš„æƒ…å†µä¸‹æ˜¾ç„¶æ˜¯ä¸å¤ªåˆç†çš„ã€‚</p>
<p>å¦å¤–ä¸€ç§è¡¨ç¤ºåˆ†ç±»ç»“æœçš„æ–¹æ³•å°±æ˜¯one-hot encodingã€‚one-hot encodingå°†æ¯ä¸€ç§åˆ†ç±»ç»“æœç”¨ä¸€ä¸ªå‘é‡è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼Œè¿˜æ˜¯å¯¹äºä¸€ä¸ªå¯èƒ½æœ‰3ç§åˆ†ç±»ç»“æœçš„å­¦ä¹ ä»»åŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨$\{\{1, 0, 0\}, \{0, 1, 0\}, \{0, 0, 1\}\}$æ¥åˆ†åˆ«è¡¨ç¤ºç¬¬ä¸€ç±»åˆ°ç¬¬ä¸‰ç±»ï¼Œè¿™æ ·æ¯ä¸ªç§ç±»ä¹‹é—´å¯ä»¥çœ‹ä½œæ˜¯æ²¡æœ‰ç›´æ¥å…³ç³»çš„ï¼ˆç§ç±»çš„è¡¨ç¤ºå‘é‡ä¹‹é—´ä¸¤ä¸¤æ­£äº¤ï¼‰ã€‚</p>
<p>æ‰€ä»¥ï¼Œå¯¹äºç§ç±»ä¹‹é—´æœ‰è‡ªç„¶åºå…³ç³»çš„åˆ†ç±»å­¦ä¹ ä»»åŠ¡ï¼Œå¯ä»¥ä½¿ç”¨è‡ªç„¶åºæ¥å¯¹ç»“æœè¿›è¡Œç¼–ç ã€‚ä½†æ˜¯å¦‚æœç§ç±»ä¹‹é—´æ²¡æœ‰è‡ªç„¶åºå…³ç³»ï¼Œåº”è¯¥å°½é‡ä½¿ç”¨one-hot encodingã€‚</p>
<p>softmax-regressionæ¨¡å‹ä½¿ç”¨çš„å°±æ˜¯one-hot encodingæ¥å¯¹åˆ†ç±»ç»“æœè¿›è¡Œè¡¨ç¤ºã€‚</p>
<h1 id="softmax-regression-ç½‘ç»œç»“æ„"><a href="#softmax-regression-ç½‘ç»œç»“æ„" class="headerlink" title="softmax-regression ç½‘ç»œç»“æ„"></a>softmax-regression ç½‘ç»œç»“æ„</h1><p>å¯¹äºä¸€ä¸ªæœ‰nä¸ªè¾“å…¥ç‰¹å¾ï¼Œmä¸ªå¯èƒ½åˆ†ç±»ç»“æœçš„ç½‘ç»œæ¥è¯´ï¼Œå…¶ç»“æ„ä¸ºï¼š</p>
<script type="math/tex; mode=display">
o_1 = x_1w_{11} + x_2w_{21} + \dots + x_nw_{n1} + b_1 \\
o_2 = x_1w_{12} + x_2w_{22} + \dots + x_nw_{n2} +b_2 \\
\dots \\
o_m = x_1w_{1m} + x_2w_{2m} + \dots + x_nw_{nm} + b_m</script><p>ç”±æ­¤å¯è§ä¸€ä¸ªsoftmax-regressionç½‘ç»œæ˜¯ä¸€ä¸ªå•å±‚çš„å…¨è¿æ¥ç½‘ç»œã€‚</p>
<p><img src="/2021/01/31/machine_learning/linear_model/softmax-regression/softmax_regression_net_structure.png" alt="net structure" style="zoom:50%;"></p>
<h1 id="softmaxå‡½æ•°"><a href="#softmaxå‡½æ•°" class="headerlink" title="softmaxå‡½æ•°"></a>softmaxå‡½æ•°</h1><p>åœ¨softmax-regressionçš„ç½‘ç»œä¸­ï¼Œæˆ‘ä»¬å¯å°†æ¯ä¸ªè¾“å‡ºçœ‹ä½œä¸€ä¸ªæ ·æœ¬å¯èƒ½æ˜¯æŸä¸€ç±»åˆ«çš„æ¦‚ç‡ï¼Œè¾“å‡ºç»“æœæœ€å¤§çš„é‚£ä¸ªå°±æ˜¯æœ€æœ‰å¯èƒ½çš„åˆ†ç±»ç»“æœã€‚ä½†æ˜¯æœ€ä¸ºæ¦‚ç‡ï¼Œå°±éœ€è¦è¾“å‡ºçš„å€¼ä½äº$[0, 1]$ä¹‹é—´ï¼Œå¹¶ä¸”æ‰€æœ‰å€¼ä¹‹å’Œä¸º1ã€‚è¿™å¯¹äºä½¿ç”¨çº¿å½¢æ¨¡å‹çš„è¾“å‡ºæ¥è¯´æœ‰äº›å›°éš¾ã€‚æ‰€ä»¥ä¸ºäº†ä¿è¯è®©ç½‘ç»œè¾“å‡ºçš„ç»“æœèƒ½å¤Ÿä½œä¸ºæ¦‚ç‡ï¼Œéœ€è¦å¯¹è¾“å‡ºä½œä¸ºè¿›ä¸€æ­¥å¤„ç†ï¼Œä¿è¯è¾“å‡ºçš„ç»“æœå¿…é¡»ä¸ºéè´Ÿå¹¶ä¸”å’Œä¸º1ã€‚softmaxå‡½æ•°å°±æ˜¯ä¸€ä¸ªè¿™æ ·çš„å‡½æ•°:</p>
<script type="math/tex; mode=display">
y_i = softmax(o_i) = \frac{e^{(oi)}}{\sum_{j=0}^{m} e^{(o_j)}}</script><font color="orange">è™½ç„¶softmaxå‡½æ•°ä¸æ˜¯ä¸€ä¸ªçº¿æ€§å‡½æ•°ï¼Œä½†æ˜¯softmax-regressionçš„è¾“å‡ºä»ç„¶æ˜¯ç”±è¾“å…¥ç‰¹å¾çš„çº¿å½¢å˜æ¢ï¼ˆä»¿å°„å˜æ¢ï¼‰å†³å®šçš„ï¼Œæ‰€ä»¥softmax-regressionä»ç„¶æ˜¯ä¸€ä¸ªçº¿å½¢æ¨¡å‹ã€‚</font>



<h1 id="äº¤å‰ç†µæŸå¤±"><a href="#äº¤å‰ç†µæŸå¤±" class="headerlink" title="äº¤å‰ç†µæŸå¤±"></a>äº¤å‰ç†µæŸå¤±</h1><p>äº¤å‰ç†µæ˜¯ä¸€ä¸ªä¿¡æ¯è®ºä¸­çš„æ¦‚å¿µï¼Œå®ƒè¡¡é‡äº†é¢„æµ‹çš„æ¦‚ç‡åˆ†å¸ƒå’ŒçœŸå®çš„æ¦‚ç‡åˆ†å¸ƒä¹‹é—´çš„å·®å¼‚ã€‚åœ¨softmax-regressionä¸­ï¼Œå¯ä»¥å°†ç½‘ç»œé¢„æµ‹çš„è¾“å‡ºçœ‹ä½œé¢„æµ‹çš„æ¦‚ç‡åˆ†å¸ƒï¼Œå°†æ ·æœ¬çš„çœŸå®ç±»åˆ«å¯¹åº”çš„ont-hotç¼–ç çœ‹ä½œæ˜¯çœŸå®æ¦‚ç‡åˆ†å¸ƒï¼Œè¿™æ ·å°±å¯ä»¥å®šä¹‰æ¨¡å‹çš„æŸå¤±å‡½æ•°äº†ã€‚å…¶å®šä¹‰å¦‚ä¸‹ï¼š</p>
<script type="math/tex; mode=display">
l(\hat{y}, y) = - \sum_{j=0}^M y_j \space log \space \hat{y_j}</script><h1 id="è®­ç»ƒ"><a href="#è®­ç»ƒ" class="headerlink" title="è®­ç»ƒ"></a>è®­ç»ƒ</h1><p>æœ‰äº†æ¨¡å‹å’ŒæŸå¤±å‡½æ•°åï¼Œå°±å¯ä»¥ä½¿ç”¨éšæœºæ¢¯åº¦ä¸‹é™æ³•ï¼ˆStochastic Gradient Descentï¼‰å¯¹æ¨¡å‹è¿›è¡Œè®­ç»ƒäº†ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> liner_regression.fashion_mnist_dataset <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="comment"># read data</span></span><br><span class="line">batch_size = <span class="number">256</span></span><br><span class="line">train_data_iter, test_data_iter = load_data_fashion_mnist(batch_size)</span><br><span class="line"></span><br><span class="line"><span class="comment"># initial model parameters</span></span><br><span class="line"><span class="comment"># each image in dataset is a 28 * 28 image, in this section, we will flatten each image,</span></span><br><span class="line"><span class="comment"># treat them as vectors of length 784</span></span><br><span class="line"><span class="comment"># so X&#x27;s size is 256 * 784, W&#x27;s size is 784 * 10, b&#x27;s size is 1 * 10, y&#x27;s size is 256 * 10 (y = softmax(XW + b))</span></span><br><span class="line">num_inputs = <span class="number">28</span> * <span class="number">28</span></span><br><span class="line">num_outputs = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">W = tf.Variable(tf.random.normal(shape=(num_inputs, num_outputs), mean=<span class="number">0</span>, stddev=<span class="number">0.01</span>))</span><br><span class="line">b = tf.Variable(tf.zeros(num_outputs))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># define softmax operation</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">softmax</span>(<span class="params">linear_result: tf.Variable</span>):</span></span><br><span class="line">    <span class="comment"># if linear_result is n * m matrix</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># exped is n * m matrix</span></span><br><span class="line">    exped = tf.exp(linear_result)</span><br><span class="line">    <span class="comment"># sum_of_each_line is n * 1 matrix, if keepdims=False, then sum_of_each_line will be 1 * n matrix</span></span><br><span class="line">    sum_of_each_line = tf.reduce_sum(exped, <span class="number">1</span>, keepdims=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">return</span> exped / sum_of_each_line</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># define modal</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">net</span>(<span class="params">data_x, param_w, param_b</span>):</span></span><br><span class="line">    <span class="keyword">return</span> softmax(tf.matmul(data_x, param_w) + param_b)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># define loss, use cross-entropy loss</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cross_entropy</span>(<span class="params">predicted_y, label_y</span>):</span></span><br><span class="line">    <span class="comment"># predicted_y is a n * m matrix, then label_y is a 1 * n matrix</span></span><br><span class="line">    <span class="comment"># in this example, predicted_y is 256 * 10, label_y = 1 * 256</span></span><br><span class="line">    <span class="keyword">return</span> -tf.math.log(tf.boolean_mask(predicted_y, tf.one_hot(label_y, depth=predicted_y.shape[-<span class="number">1</span>])))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># define optimizer</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">stochastic_gradient_descent</span>(<span class="params">params, gradients, batch_size, learning_rate: <span class="built_in">float</span></span>):</span></span><br><span class="line">    <span class="comment"># Because our loss is calculated as a sum over the mini-batch of examples,</span></span><br><span class="line">    <span class="comment"># we normalize our step size by the batch size (batch_size),</span></span><br><span class="line">    <span class="comment"># so that the magnitude of a typical step size does not depend heavily on our choice of the batch size.</span></span><br><span class="line">    <span class="keyword">for</span> param, grad <span class="keyword">in</span> <span class="built_in">zip</span>(params, gradients):</span><br><span class="line">        param.assign_sub(grad * learning_rate / batch_size)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># classification accuracy</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">accuracy</span>(<span class="params">predicted_y, label_y</span>):</span></span><br><span class="line">    <span class="comment"># predicted_y is a n * m matrix, then label_y is a 1 * n matrix</span></span><br><span class="line">    <span class="comment"># in this example, predicted_y is 256 * 10, label_y = 1 * 256</span></span><br><span class="line">    <span class="comment"># tf.argmax returns the index with the largest value across axes of a tensor.</span></span><br><span class="line">    predicted_y = tf.argmax(predicted_y, axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># cmp is a 1 * n `boolean` matrix</span></span><br><span class="line">    cmp = tf.cast(predicted_y, label_y.dtype) == label_y</span><br><span class="line">    <span class="comment"># return num of right predictions and the total num of predictions</span></span><br><span class="line">    <span class="keyword">return</span> tf.reduce_sum(tf.cast(cmp, label_y.dtype)), label_y.shape[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># training</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train</span>():</span></span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">        num_right_predictions = <span class="number">0</span></span><br><span class="line">        num_total_predictions = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> x, y <span class="keyword">in</span> train_data_iter:</span><br><span class="line">            <span class="keyword">with</span> tf.GradientTape() <span class="keyword">as</span> g:</span><br><span class="line">                x = tf.reshape(x, shape=(x.shape[<span class="number">0</span>], -<span class="number">1</span>))</span><br><span class="line">                y_hat = net(x, W, b)</span><br><span class="line">                l = cross_entropy(y_hat, y)</span><br><span class="line"></span><br><span class="line">            dw, db = g.gradient(l, [W, b])</span><br><span class="line">            stochastic_gradient_descent([W, b], [dw, db], batch_size, <span class="number">0.2</span>)</span><br><span class="line"></span><br><span class="line">            right_pred, total_pred = accuracy(y_hat, y)</span><br><span class="line">            num_right_predictions += right_pred</span><br><span class="line">            num_total_predictions += total_pred</span><br><span class="line"></span><br><span class="line">        print(<span class="string">&#x27;accuracy after one epoch is : &#x27;</span>, <span class="built_in">float</span>(num_right_predictions) / <span class="built_in">float</span>(num_total_predictions))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main&quot;</span>:</span><br><span class="line">    train()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://swordandtea.github.io/2021/01/15/others/%E5%B8%B8%E7%94%A8git%E5%91%BD%E4%BB%A4%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="SwordAndTea">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiangwei's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/15/others/%E5%B8%B8%E7%94%A8git%E5%91%BD%E4%BB%A4%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">å¸¸ç”¨gitå‘½ä»¤æ€»ç»“</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-15 17:29:14" itemprop="dateCreated datePublished" datetime="2021-01-15T17:29:14+08:00">2021-01-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-06-06 15:08:26" itemprop="dateModified" datetime="2022-06-06T15:08:26+08:00">2022-06-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/git/" itemprop="url" rel="index">
                    <span itemprop="name">git</span>
                  </a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>1.8k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>6 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="clone-ä»“åº“ç›¸å…³"><a href="#clone-ä»“åº“ç›¸å…³" class="headerlink" title="clone ä»“åº“ç›¸å…³"></a>clone ä»“åº“ç›¸å…³</h1><p>git cloneä»“åº“æœ‰ä¸¤ç§å½¢å¼ï¼Œä¸€ç§æ˜¯ä»¥sshåè®®çš„å½¢å¼ï¼Œå¦å¤–ä¸€ç§æ˜¯ä»¥httpsåè®®çš„å½¢å¼ã€‚ä½¿ç”¨sshåè®®çš„å½¢å¼æ—¶ï¼Œéœ€è¦å°†sshå…¬é’¥ä¸Šä¼ åˆ°githubæˆ–è€…gitlabã€‚ä½¿ç”¨httpsåè®®éœ€è¦åœ¨cloneçš„æ—¶å€™è¾“å…¥githubæˆ–è€…gitlabçš„è´¦å·å’Œå¯†ç ã€‚</p>
<ul>
<li><code>git clone [-b &lt;branch name&gt;] &lt;repository url&gt;</code> <ul>
<li>-b æ‰§è¡Œéœ€è¦æ‹‰å–çš„åˆ†æ”¯ï¼Œä¸æŒ‡å®šåˆ™æ‹‰å–masteråˆ†æ”¯</li>
</ul>
</li>
<li><code>git clone https://&lt;username&gt;:&lt;password&gt;@&lt;repository url&gt;</code><ul>
<li>åœ¨ä½¿ç”¨httpsåè®®æ‹‰å–ä»“åº“çš„æ—¶å€™ï¼Œç›´æ¥åœ¨urlä¸­æŒ‡å®šè´¦æˆ·å’Œå¯†ç ï¼Œ@ä½œä¸ºåˆ†å‰²ç¬¦ï¼Œå¦‚æœè´¦æˆ·æˆ–è€…å¯†ç ä¸­å«æœ‰â€œ@â€ç¬¦ï¼Œåˆ™éœ€è¦å°†å…¶æ›¿æ¢ä¸ºâ€œ%40â€</li>
</ul>
</li>
</ul>
<h1 id="å·¥ä½œåŒºã€æš‚å­˜åŒºçŠ¶æ€ç›¸å…³"><a href="#å·¥ä½œåŒºã€æš‚å­˜åŒºçŠ¶æ€ç›¸å…³" class="headerlink" title="å·¥ä½œåŒºã€æš‚å­˜åŒºçŠ¶æ€ç›¸å…³"></a>å·¥ä½œåŒºã€æš‚å­˜åŒºçŠ¶æ€ç›¸å…³</h1><ul>
<li><p><code>git status</code></p>
<ul>
<li>æŸ¥çœ‹å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„æ–‡ä»¶çŠ¶æ€</li>
</ul>
</li>
<li><p><code>git add &lt;filename&gt;</code></p>
<ul>
<li>å°†å·¥ä½œåŒºçš„æŸä¸ªæ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº</li>
</ul>
</li>
<li><p><code>git add .</code></p>
<ul>
<li>å°†å·¥ä½œåŒºå…¨éƒ¨æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº</li>
</ul>
</li>
<li><p><code>git commit -m&quot;[commit message]&quot;</code></p>
<ul>
<li>æäº¤æš‚å­˜åŒºçš„æ–‡ä»¶ä¿®æ”¹åˆ°æœ¬åœ°ä»“åº“</li>
</ul>
</li>
<li><p><code>git rm &lt;filename&gt;</code></p>
<ul>
<li>å–æ¶ˆå¯¹æ–‡ä»¶çš„è¿½è¸ª</li>
</ul>
</li>
</ul>
<h1 id="æäº¤å†å²ç›¸å…³"><a href="#æäº¤å†å²ç›¸å…³" class="headerlink" title="æäº¤å†å²ç›¸å…³"></a>æäº¤å†å²ç›¸å…³</h1><ul>
<li><code>git log --graph --pretty=oneline --abbrev-commit [filename]</code><ul>
<li>æŸ¥çœ‹å½“å‰åˆ†æ”¯çš„æäº¤å†å²</li>
<li>â€”graphï¼šä»¥å›¾è¡¨çš„æ–°å¼</li>
<li>â€”pretty=onelineï¼šåªæ˜¾ç¤ºcommitä¿¡æ¯ï¼Œä¸æ˜¾ç¤ºæäº¤ä½œè€…å’Œæ—¶é—´ç­‰å…¶ä»–ä¿¡æ¯</li>
<li>â€”abbrev-commitï¼šcommit idä»¥ç®€å†™çš„å½¢å¼å±•ç¤º</li>
<li>filename: å¯é€‰é¡¹ï¼Œåªæ˜¾ç¤ºæŸä¸ªæ–‡ä»¶çš„æäº¤å†å²</li>
</ul>
</li>
<li><code>git reflog</code><ul>
<li>æŸ¥çœ‹æ“ä½œè®°å½•ï¼Œ<font color="red">å€ŸåŠ©è¯¥å‘½ä»¤å¯ä»¥å–æ¶ˆç‰ˆæœ¬å›é€€ã€‚</font></li>
</ul>
</li>
<li><code>git reset [--soft|--mixed|--hard] HEAD^</code><ul>
<li>å°†å½“å‰åˆ†æ”¯çš„æäº¤å›é€€åˆ°ä¸Šä¸€ä¸ªæäº¤</li>
<li>â€”softï¼šå½“å‰æäº¤ä¿®æ”¹ä¼šä¿å­˜åˆ°æš‚å­˜åŒºï¼Œå¹¶ä¸”<font color="orange">å½“å‰å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„ä¿®æ”¹ä¹Ÿä¼šä¿ç•™</font></li>
<li>â€”mixï¼šå½“å‰æäº¤çš„ä¿®æ”¹ä¼šä¿å­˜åˆ°å·¥ä½œåŒºï¼Œå¹¶ä¸”<font color="orange">å½“å‰æš‚å­˜åŒºçš„ä¿®æ”¹éƒ½ä¼šç§»åˆ°å·¥ä½œåŒº</font></li>
<li>â€”hard: ä¸¢å¼ƒå½“å‰æäº¤çš„ä¿®æ”¹ï¼Œå¹¶ä¸”<font color="red">ä¸¢å¼ƒå½“å‰å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„ä¿®æ”¹</font></li>
<li><font color="orange">--mixæ˜¯é»˜è®¤çš„é€‰é¡¹</font></li>
<li>ä¸€ä¸ªå¿«é€Ÿæ¸…é™¤å½“å‰æš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„å‘½ä»¤ï¼š<code>git add . &amp;&amp; git reset --hard HEAD</code>ã€‚æ³¨æ„æ²¡æœ‰â€^â€ï¼Œå¦åˆ™å°±å›é€€åˆ°äº†ä¸Šä¸ªæäº¤</li>
</ul>
</li>
<li><code>git reset [--soft|--mixed|--hard] HEAD~&lt;number&gt;</code><ul>
<li>å›é€€å½“å‰åˆ†æ”¯æäº¤åˆ°ä¸Šnumberä¸ªç‰ˆæœ¬</li>
</ul>
</li>
<li><code>git reset [--soft|--mixed|--hard] HEAD &lt;commit id&gt;</code><ul>
<li>å›é€€å½“å‰åˆ†æ”¯æäº¤åˆ°æŒ‡å®šçš„commit id</li>
</ul>
</li>
<li><code>git checkout &lt;commit id&gt; &lt;filename&gt;</code><ul>
<li>åªå°†æŸä¸ªæ–‡ä»¶å›é€€åˆ°æŸä¸ªç‰ˆæœ¬</li>
</ul>
</li>
</ul>
<h1 id="åˆ†æ”¯ç›¸å…³"><a href="#åˆ†æ”¯ç›¸å…³" class="headerlink" title="åˆ†æ”¯ç›¸å…³"></a>åˆ†æ”¯ç›¸å…³</h1><ul>
<li><p><code>git branch</code></p>
<ul>
<li>æŸ¥çœ‹æœ¬åœ°æœ‰å“ªäº›åˆ†æ”¯</li>
</ul>
</li>
<li><p><code>git branch &lt;branch name&gt;</code></p>
<ul>
<li>åˆ›å»ºåˆ†æ”¯ï¼Œä½†æ˜¯ç›®å‰ä»ç„¶ä½äºå½“å‰åˆ†æ”¯</li>
</ul>
</li>
<li><p><code>git branch &lt;branch name&gt; &lt;commit id&gt;</code></p>
<ul>
<li>åŸºäºcommit idåˆ›å»ºåˆ†æ”¯ï¼Œç›®å‰ä»ä½äºå½“å‰åˆ†æ”¯</li>
</ul>
</li>
<li><p><code>git checkout -b &lt;branch name&gt;</code></p>
<ul>
<li>åˆ›å»ºå¹¶åˆ‡æ¢åˆ†æ”¯</li>
</ul>
</li>
<li><p><code>git checkout -b &lt;branch name&gt; &lt;commit id&gt;</code></p>
<ul>
<li>åŸºäºæŸä¸ªcommit idåˆ›å»ºå¹¶åˆ‡æ¢åˆ†æ”¯</li>
</ul>
</li>
<li><p><code>git checkout &lt;branch name&gt;</code></p>
<ul>
<li>åˆ‡æ¢åˆ†æ”¯ï¼Œ<font color="orange">å¦‚æœæœ¬åœ°æ²¡æœ‰å¯¹åº”åˆ†æ”¯ä½†æ˜¯è¿œç¨‹ä»“åº“æœ‰</font>ï¼Œåˆ™å°†å¯¹åº”çš„è¿œç¨‹åˆ†æ”¯æ‹‰å–åˆ°æœ¬åœ°å¹¶åˆ‡æ¢åˆ°å¯¹åº”åˆ†æ”¯</li>
</ul>
</li>
<li><p><code>git branch -d &lt;branch name&gt;</code></p>
<ul>
<li>åˆ é™¤åˆ†æ”¯ï¼Œå¦‚æœåˆ†æ”¯æœ‰æäº¤ä½†æ˜¯æ²¡æœ‰åˆå…¥å…¶ä»–åˆ†æ”¯ï¼Œä¼šæŠ¥é”™</li>
</ul>
</li>
<li><p><code>git branch -D &lt;branch name&gt;</code></p>
<ul>
<li>å¼ºåˆ¶åˆ é™¤æŸä¸ªåˆ†æ”¯</li>
</ul>
</li>
<li><p><code>git checkout -f &lt;branch name&gt;</code></p>
<ul>
<li>å¼ºè¡Œåˆ‡æ¢åˆ°æŸä¸ªåˆ†æ”¯ï¼Œ<font color="red">å¦‚æœå½“å‰å·¥ä½œåŒºå’Œæš‚å­˜åŒºæœ‰å†…å®¹ï¼Œå°†ä¸¢å¼ƒè¿™äº›å†…å®¹</font></li>
</ul>
</li>
</ul>
<h1 id="åˆå¹¶ç›¸å…³"><a href="#åˆå¹¶ç›¸å…³" class="headerlink" title="åˆå¹¶ç›¸å…³"></a>åˆå¹¶ç›¸å…³</h1><ul>
<li><p><code>git merge &lt;branch name&gt;</code></p>
<ul>
<li>å°†branch nameå¯¹åº”çš„åˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯</li>
<li>å¦‚æœåˆå¹¶æœ‰å†²çªï¼Œéœ€è¦æ‰‹åŠ¨è§£å†³å†²çªï¼ˆåˆ°æœ‰å†²çªçš„æ–‡ä»¶è¿›è¡Œç¼–è¾‘ï¼‰åï¼Œæ‰§è¡Œaddå’Œcommit</li>
</ul>
</li>
</ul>
<h1 id="è¿œç¨‹ä»“åº“ç›¸å…³"><a href="#è¿œç¨‹ä»“åº“ç›¸å…³" class="headerlink" title="è¿œç¨‹ä»“åº“ç›¸å…³"></a>è¿œç¨‹ä»“åº“ç›¸å…³</h1><ul>
<li><code>git remote add origin &lt;remote repository url&gt;</code><ul>
<li>å…³è”è¿œç¨‹ä»“åº“</li>
</ul>
</li>
<li><code>git remote remove origin</code><ul>
<li>å–æ¶ˆå…³è”è¿œç¨‹ä»“åº“</li>
</ul>
</li>
<li><code>git push origin &lt;branch&gt;</code><ul>
<li>å°†æœ¬åœ°åˆ†æ”¯çš„commitæ¨é€åˆ°åˆ°è¿œç¨‹åˆ†æ”¯</li>
</ul>
</li>
<li><code>git push --force-with-lease origin &lt;branch&gt;</code><ul>
<li>ä»¥æœ€å°å¼ºåˆ¶æ›´æ–°çš„æ‰‹æ®µï¼Œå°†æœ¬åœ°åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯</li>
<li><font color="red">å°½é‡ä¸è¦å¼ºåˆ¶æ¨é€è¿œç¨‹åˆ†æ”¯ï¼Œå°¤å…¶æ˜¯å…¶ä»–äººå¼€å‘çš„åˆ†æ”¯</font></li>
</ul>
</li>
<li><code>git push origin --delete &lt;branch&gt;</code><ul>
<li>åˆ é™¤è¿œç¨‹åˆ†æ”¯</li>
</ul>
</li>
</ul>
<h1 id="å­æ¨¡å—ç›¸å…³"><a href="#å­æ¨¡å—ç›¸å…³" class="headerlink" title="å­æ¨¡å—ç›¸å…³"></a>å­æ¨¡å—ç›¸å…³</h1><ul>
<li><p><code>git submodule add &lt;repository&gt; &lt;dir&gt;</code></p>
<ul>
<li>æ·»åŠ å­æ¨¡å—ï¼Œå­æ¨¡å—çš„é“¾æ¥ä¸ºurlï¼Œæ·»åŠ åˆ°ç›¸å¯¹äºå½“å‰ç›®å½•çš„dirç›®å½•ä¸‹</li>
</ul>
</li>
<li><p><code>git submodule init</code></p>
<ul>
<li>è¯»å–æœ¬åœ°å­æ¨¡å—é…ç½®æ–‡ä»¶</li>
</ul>
</li>
<li><p><code>git submodule update</code></p>
<ul>
<li>æ‹‰å–å­æ¨¡å—</li>
</ul>
</li>
<li><p><code>git submoduel update &lt;submodule dir path&gt;</code></p>
<ul>
<li>æ‹‰å–æŒ‡å®šçš„å­æ¨¡å—</li>
</ul>
</li>
<li><p><code>git clone --recurse-submodules</code></p>
<ul>
<li>æ‹‰å–å¸¦æœ‰å­æ¨¡å—çš„ä»“åº“æ—¶ï¼ŒåŒæ—¶ä¹Ÿæ‹‰å–å­æ¨¡å—</li>
</ul>
</li>
</ul>
<h1 id="tagç›¸å…³"><a href="#tagç›¸å…³" class="headerlink" title="tagç›¸å…³"></a>tagç›¸å…³</h1><ul>
<li><code>git tag</code><ul>
<li>æŸ¥çœ‹æ‰€æœ‰çš„æ ‡ç­¾</li>
</ul>
</li>
<li><code>git tag &lt;tag name&gt;</code><ul>
<li>åˆ›å»ºä¸€ä¸ªè½»é‡æ ‡ç­¾ï¼Œè½»é‡æ ‡ç­¾å»ºè®®åœ¨åˆ›å»ºä¸´æ—¶æ ‡ç­¾æ—¶ä½¿ç”¨</li>
</ul>
</li>
<li><code>git tag -a &lt;tag name&gt; -m &lt;tag message&gt;</code><ul>
<li>åˆ›å»ºä¸€ä¸ªé™„æ³¨æ ‡ç­¾ï¼Œæ­£å¼æ ‡ç­¾ä½¿ç”¨</li>
</ul>
</li>
<li><code>git show &lt;tag name&gt;</code><ul>
<li>æŸ¥çœ‹æ ‡ç­¾ä¿¡æ¯å’Œä¸ä¹‹å¯¹åº”çš„æäº¤ä¿¡æ¯</li>
</ul>
</li>
<li><code>git push origin &lt;tag name&gt;</code><ul>
<li>å°†æ ‡ç­¾æ¨é€åˆ°è¿œç¨‹ä»“åº“</li>
</ul>
</li>
<li><code>git tag -d &lt;tag name&gt;</code><ul>
<li>åˆ é™¤æœ¬åœ°æ ‡ç­¾</li>
</ul>
</li>
<li><code>git push origin --delete &lt;tag name&gt;</code><ul>
<li>åˆ é™¤è¿œç¨‹æ ‡ç­¾</li>
</ul>
</li>
</ul>
<h1 id="rebaseç›¸å…³"><a href="#rebaseç›¸å…³" class="headerlink" title="rebaseç›¸å…³"></a>rebaseç›¸å…³</h1><ul>
<li><code>git rebase &lt;branch name&gt;</code><ul>
<li>å°†å½“å‰åˆ†æ”¯rebaseåˆ°branch nameå¯¹åº”çš„åˆ†æ”¯</li>
</ul>
</li>
<li><code>git rebase -i HEAD~&lt;num&gt;</code><ul>
<li>å°†å½“å‰æäº¤å’Œå½“å‰æäº¤å‰çš„å…±numä¸ªæäº¤åˆå¹¶ä¸º</li>
</ul>
</li>
<li><code>git rebase --abort</code><ul>
<li>rebase æœ‰å†²çªæ—¶ï¼Œå–æ¶ˆrebase</li>
</ul>
</li>
<li><code>git rebase --continue</code><ul>
<li>rebase å†²å‡»è§£å†³åï¼Œç»§ç»­æ‰§è¡Œrebaseæ“ä½œ</li>
</ul>
</li>
</ul>
<h1 id="stash-ç›¸å…³"><a href="#stash-ç›¸å…³" class="headerlink" title="stash ç›¸å…³"></a>stash ç›¸å…³</h1><p>stash é€šå¸¸ç”¨äºå½“å‰åœ¨ä¸€ä¸ªåˆ†æ”¯æœ‰ä»£ç çš„æ›´æ–°æ”¾åœ¨å·¥ä½œåŒºæˆ–è€…æš‚å­˜åŒºï¼Œä½†æ˜¯éœ€è¦ä¸´æ—¶å»å¤„ç†å…¶ä»–åˆ†æ”¯çš„ä»£ç ï¼Œåˆä¸è¡Œåœ¨å½“å‰åˆ†æ”¯è¿›è¡Œæäº¤æ“ä½œï¼Œé‚£ä¹ˆå¯ä»¥å…ˆå°†å½“å‰åˆ†æ”¯ä¸­å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„ä»£ç stashèµ·æ¥ï¼Œä¹‹åå†popå›æ¥ã€‚</p>
<ul>
<li><code>git stash save &lt;message&gt;</code><ul>
<li>å°†å½“å‰å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„ä¿®æ”¹ä¿å­˜åˆ°å…¶ä»–åœ°æ–¹ï¼Œå¹¶å°†å½“å‰å·¥ä½œåŒºå’Œæš‚å­˜åŒºæ¸…ç©º</li>
</ul>
</li>
<li><code>git stash list</code><ul>
<li>æŸ¥çœ‹stash çš„åˆ—è¡¨</li>
</ul>
</li>
<li><code>git stash pop [index | stash_id]</code> <ul>
<li>å¦‚æœä¸ä¼ indexæˆ–è€…stash idå‚æ•°ï¼Œå°†stashåˆ—è¡¨çš„æœ€åä¸€ä¸ªstashæ¢å¤åˆ°å·¥ä½œåŒºå’Œæš‚å­˜åŒºï¼Œå¹¶å°†è¯¥stashä»stash listä¸­åˆ é™¤</li>
<li><font color="red">stash listçš„å­˜å‚¨ç»“æ„æ˜¯ä¸€ä¸ªæ ˆç»“æ„ï¼Œæœ€åstashçš„stash idæœ€å°ï¼Œä¹Ÿæœ€æ–°è¢«popå‡ºæ¥</font></li>
<li>å¦‚æœä¼ å…¥indexæˆ–è€…stash idå‚æ•°ï¼Œåˆ™å°†å…¶å¯¹åº”çš„stashæ¢å¤åˆ°å·¥ä½œå»å’Œæš‚å­˜åŒºï¼Œå¹¶å°†è¯¥stashä»stash listä¸­åˆ é™¤</li>
</ul>
</li>
<li><code>git stash apply [index | stash_id]</code><ul>
<li>é™¤äº†ä¸åˆ é™¤å¯¹åº”çš„stashå¤–ï¼Œå…¶ä»– å’Œ <code>git stash pop</code>ç›¸åŒ</li>
</ul>
</li>
<li><code>git stash drop [stash id]</code><ul>
<li>åˆ é™¤ä¸€ä¸ªå­˜å‚¨è¿›åº¦</li>
</ul>
</li>
<li><code>git stash clear</code><ul>
<li>æ¸…é™¤stash list</li>
</ul>
</li>
</ul>
<h1 id="ç‰¹æ®Šæ–‡ä»¶"><a href="#ç‰¹æ®Šæ–‡ä»¶" class="headerlink" title="ç‰¹æ®Šæ–‡ä»¶"></a>ç‰¹æ®Šæ–‡ä»¶</h1><ul>
<li><code>.gitignore</code><ul>
<li>è®°å½•gitåº”è¯¥ä¸å¯¹å“ªäº›æ–‡ä»¶è¿›è¡Œè·Ÿè¸ªçš„é…ç½®</li>
</ul>
</li>
<li><code>.gitmoduels</code><ul>
<li>è®°å½•å­æ¨¡å—ä¿¡æ¯çš„æ–‡ä»¶</li>
</ul>
</li>
<li><code>.gitattributes</code><ul>
<li>git-lfsåº”è¯¥å¤„ç†çš„æ–‡ä»¶ä¿¡æ¯</li>
</ul>
</li>
<li><code>.gitlab-ci.yml</code><ul>
<li>gitlab cié…ç½®æ–‡ä»¶</li>
</ul>
</li>
</ul>
<h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><ul>
<li><p>git-lfs</p>
<ul>
<li><p>gitå¤§æ–‡ä»¶å¤„ç†å·¥å…·</p>
</li>
<li><p><code>git lfs install</code>ï¼šå¼€å¯lfs</p>
</li>
<li><p><code>git lfs track *.zip</code>ï¼šå°†zipæ–‡ä»¶ä½œä¸ºlfsæ–‡ä»¶ç®¡ç†</p>
</li>
<li><p><code>GIT_LFS_SKIP_SMUDGE=1 git xxx</code>ï¼šæ­¤æ¬¡æ“ä½œä¸ä¼šå»ä¸‹è½½lfsæ–‡ä»¶</p>
</li>
</ul>
</li>
<li>åˆ†ç¦»å¤´æŒ‡é’ˆ<ul>
<li>å½“å‰HEADæŒ‡é’ˆæ‰€æŒ‡å‘çš„commitæ²¡æœ‰å’Œä»»ä½•åˆ†æ”¯å…³è”ï¼Œè¿™ç§æƒ…å†µä¸€èˆ¬å‡ºç°åœ¨ç›´æ¥ä»æŸä¸ªcommit checkoutå‡ºæ¥çš„æƒ…å†µï¼ˆå³æ‰§è¡Œäº†<code>git checkout &lt;commit id&gt;</code> ï¼‰ã€‚<font color="red">å¦‚æœåœ¨åˆ†ç¦»å¤´æŒ‡é’ˆè¿›è¡Œäº†ä»£ç ä¿®æ”¹å¹¶æäº¤åï¼Œå†åˆ‡æ¢åˆ°å…¶ä»–åˆ†æ”¯ï¼Œé‚£ä¹ˆè¿™ä¸ªæäº¤å°±ä¼šä¸¢å¤±ï¼Œæ´»éƒ½ç™½å¹²äº†ã€‚</font>æ­£ç¡®åšæ³•æ˜¯ä¸ºè¯¥åˆ†ç¦»çš„å¤´æŒ‡é’ˆåˆ›å»ºbranchè¿›è¡Œå…³è”ï¼Œè¿™æ—¶æ‰§è¡Œ<code>git checkout -b &lt;branch&gt;</code>å³å¯ã€‚</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="SwordAndTea"
      src="/images/avatar.jpeg">
  <p class="site-author-name" itemprop="name">SwordAndTea</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">121</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">38</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/SwordAndTea" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;SwordAndTea" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">SwordAndTea</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
      <span class="post-meta-item-text">Symbols count total: </span>
    <span title="Symbols count total">153k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">Reading time total &asymp;</span>
    <span title="Reading time total">8:29</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v5.4.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme â€“ <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.1
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      
<script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', () => {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    

  

</body>
</html>
